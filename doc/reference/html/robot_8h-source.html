<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Graspit: C:/Documents and Settings/cmatei/My Documents/GraspitVersions/Graspit-2-1/include/robot.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>C:/Documents and Settings/cmatei/My Documents/GraspitVersions/Graspit-2-1/include/robot.h</h1><a href="robot_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">//######################################################################</span>
<a name="l00002"></a>00002 <span class="comment">//</span>
<a name="l00003"></a>00003 <span class="comment">// GraspIt!</span>
<a name="l00004"></a>00004 <span class="comment">// Copyright (C) 2002-2009  Columbia University in the City of New York.</span>
<a name="l00005"></a>00005 <span class="comment">// All rights reserved.</span>
<a name="l00006"></a>00006 <span class="comment">//</span>
<a name="l00007"></a>00007 <span class="comment">// GraspIt! is free software: you can redistribute it and/or modify</span>
<a name="l00008"></a>00008 <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l00009"></a>00009 <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l00010"></a>00010 <span class="comment">// (at your option) any later version.</span>
<a name="l00011"></a>00011 <span class="comment">//</span>
<a name="l00012"></a>00012 <span class="comment">// GraspIt! is distributed in the hope that it will be useful,</span>
<a name="l00013"></a>00013 <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00014"></a>00014 <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00015"></a>00015 <span class="comment">// GNU General Public License for more details.</span>
<a name="l00016"></a>00016 <span class="comment">//</span>
<a name="l00017"></a>00017 <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l00018"></a>00018 <span class="comment">// along with GraspIt!.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l00019"></a>00019 <span class="comment">//</span>
<a name="l00020"></a>00020 <span class="comment">// Author(s):  Andrew T. Miller and Matei T. Ciocarlie</span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 <span class="comment">// $Id: robot.h,v 1.53.2.1 2009/07/23 21:17:49 cmatei Exp $</span>
<a name="l00023"></a>00023 <span class="comment">//</span>
<a name="l00024"></a>00024 <span class="comment">//######################################################################</span>
<a name="l00025"></a>00025 
<a name="l00030"></a>00030 <span class="preprocessor">#ifndef ROBOT_H</span>
<a name="l00031"></a>00031 <span class="preprocessor"></span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;vector&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;map&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;QTextStream&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;QString&gt;</span>
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 <span class="preprocessor">#include "<a class="code" href="collision_structures_8h.html">collisionStructures.h</a>"</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include "<a class="code" href="mytools_8h.html" title="Various useful macros and functions for dealing with errors and other common operations...">mytools.h</a>"</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include "kinematicChain.h"</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include "dof.h"</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include "<a class="code" href="world_element_8h.html" title="Defines the world element base class that is used for all robots and bodies.">worldElement.h</a>"</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include "<a class="code" href="body_8h.html" title="Defines the body class hierarchy.">body.h</a>"</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include "<a class="code" href="joint_8h.html" title="Defines the classes: DHTransform, Joint, RevoluteJoint, and PrismaticJoint.">joint.h</a>"</span>
<a name="l00044"></a>00044 
<a name="l00045"></a>00045 <span class="keyword">class </span><a class="code" href="class_grasp.html" title="A grasp occurs between a hand and an object and has quality measures associated with...">Grasp</a>;
<a name="l00046"></a>00046 <span class="keyword">class </span><a class="code" href="class_glove_interface.html" title="Interface between a GraspIt robot and the CyberGlove.">GloveInterface</a>;
<a name="l00047"></a>00047 <span class="keyword">class </span>CyberGlove;
<a name="l00048"></a>00048 <span class="keyword">class </span><a class="code" href="class_eigen_grasp_interface.html">EigenGraspInterface</a>;
<a name="l00049"></a>00049 <span class="keyword">class </span><a class="code" href="class_matrix.html" title="A class for storing and performing operations on general 2-dimensional matrices.">Matrix</a>;
<a name="l00050"></a>00050 <span class="keyword">class </span>TiXmlElement;
<a name="l00051"></a>00051 
<a name="l00053"></a>00053 
<a name="l00097"></a><a class="code" href="class_robot.html">00097</a> <span class="keyword">class </span><a class="code" href="class_robot.html" title="Base class for all robots which are collections of links connected by moveable joints...">Robot</a> : <span class="keyword">public</span> <a class="code" href="class_world_element.html" title="The base class for all physical elements within the world.">WorldElement</a> {
<a name="l00098"></a>00098   Q_OBJECT
<a name="l00099"></a>00099 
<a name="l00100"></a>00100 signals:
<a name="l00102"></a>00102   <span class="keywordtype">void</span> <a class="code" href="class_robot.html#6b57b51e1bffc38c6202da369661f7a1" title="This signal informs that dof values have changed.">configurationChanged</a>();
<a name="l00103"></a>00103 
<a name="l00105"></a>00105   <span class="keywordtype">void</span> <a class="code" href="class_robot.html#22919b77661daebdec89ce295f868491" title="This signal informs that user has begun interaction by clicking on a robot handler...">userInteractionStart</a>();
<a name="l00106"></a>00106 
<a name="l00108"></a>00108   <span class="keywordtype">void</span> <a class="code" href="class_robot.html#a18bb8397c8a4696f7993818c6f8ba9c" title="This signal is the complement of userInteractionStart().">userInteractionEnd</a>();
<a name="l00109"></a>00109 
<a name="l00111"></a>00111   <span class="keywordtype">void</span> <a class="code" href="class_robot.html#54d6e1b756fcd7fdabed1544342c867c" title="Emitted by moveDOFToCOntacts each time a step is taken.">moveDOFStepTaken</a>(<span class="keywordtype">int</span> numCols, <span class="keywordtype">bool</span> &amp;stopRequest);
<a name="l00112"></a>00112 
<a name="l00113"></a>00113 <span class="keyword">private</span>:
<a name="l00114"></a>00114   <span class="comment">// Connection to a parent robot </span>
<a name="l00116"></a>00116 <span class="comment"></span>  <a class="code" href="class_robot.html" title="Base class for all robots which are collections of links connected by moveable joints...">Robot</a> *parent;
<a name="l00118"></a>00118   <span class="keywordtype">int</span> parentChainNum;
<a name="l00120"></a>00120   <a class="code" href="classtransf.html" title="A rigid body transformation.">transf</a> tranToParentEnd;
<a name="l00122"></a>00122   <a class="code" href="class_link.html" title="Used for bodies that are part of a robot.">Link</a> *mountPiece;
<a name="l00123"></a>00123 
<a name="l00124"></a>00124 <span class="keyword">protected</span>:
<a name="l00125"></a>00125 
<a name="l00126"></a>00126   <span class="comment">// The structure of the robot itself  </span>
<a name="l00128"></a><a class="code" href="class_robot.html#471d7a5e8bb073ca5d7590ced25d174c">00128</a> <span class="comment"></span>  <span class="keywordtype">int</span> <a class="code" href="class_robot.html#471d7a5e8bb073ca5d7590ced25d174c" title="The number of kinematic chains (or fingers) this robot has.">numChains</a>;
<a name="l00130"></a><a class="code" href="class_robot.html#09dfed38d9b12b41f96e530e54d92240">00130</a>   <span class="keywordtype">int</span> <a class="code" href="class_robot.html#09dfed38d9b12b41f96e530e54d92240" title="The number of degrees of freedom this robot has.">numDOF</a>;
<a name="l00132"></a><a class="code" href="class_robot.html#f0a0d456d8d4c926553df2f61c72a34c">00132</a>   <span class="keywordtype">int</span> <a class="code" href="class_robot.html#f0a0d456d8d4c926553df2f61c72a34c" title="The total number of joints of this robot. Set when robot is loaded.">numJoints</a>;
<a name="l00134"></a><a class="code" href="class_robot.html#d15253d797e1c5a9c3a27be9142a1e08">00134</a>   std::vector&lt;KinematicChain *&gt; <a class="code" href="class_robot.html#d15253d797e1c5a9c3a27be9142a1e08" title="A vector of pointers to this robot&amp;#39;s kinematic chains.">chainVec</a>;
<a name="l00136"></a><a class="code" href="class_robot.html#9d9dabf88663411787224d4664d1d783">00136</a>   std::vector&lt;DOF *&gt; <a class="code" href="class_robot.html#9d9dabf88663411787224d4664d1d783" title="A vector of pointers to this robot&amp;#39;s DOF&amp;#39;s.">dofVec</a>;
<a name="l00138"></a><a class="code" href="class_robot.html#918ffa00dd08447377445d26c0e9500d">00138</a>   <a class="code" href="class_link.html" title="Used for bodies that are part of a robot.">Link</a> *<a class="code" href="class_robot.html#918ffa00dd08447377445d26c0e9500d" title="A pointer to the base link (or palm) of the robot.">base</a>;
<a name="l00139"></a>00139 
<a name="l00140"></a>00140   <span class="comment">// Save and restore state</span>
<a name="l00142"></a><a class="code" href="class_robot.html#6f95caba6f1cf93d5da267b5cb6837e9">00142</a> <span class="comment"></span>  <a class="code" href="classtransf.html" title="A rigid body transformation.">transf</a> <a class="code" href="class_robot.html#6f95caba6f1cf93d5da267b5cb6837e9" title="Is used to save the current transform if we want to restore it later.">savedTran</a>;
<a name="l00144"></a><a class="code" href="class_robot.html#d14510273c203a2e10e6bcbb039bb6f2">00144</a>   QString <a class="code" href="class_robot.html#d14510273c203a2e10e6bcbb039bb6f2" title="Is used to store the states of the DOF; a stream is convenient as it can pack all...">savedDOF</a>;
<a name="l00146"></a><a class="code" href="class_robot.html#ce3d8196f0019c12fc8708928a3f5c8b">00146</a>   <span class="keywordtype">bool</span> <a class="code" href="class_robot.html#ce3d8196f0019c12fc8708928a3f5c8b" title="Tells us whether the state has been previously saved or not.">savedState</a>;
<a name="l00147"></a>00147 
<a name="l00149"></a><a class="code" href="class_robot.html#2a4d46b9f9c5df1f0bd60caabf23edbd">00149</a>   <span class="keywordtype">bool</span> <a class="code" href="class_robot.html#2a4d46b9f9c5df1f0bd60caabf23edbd" title="Whether changes to the position / geometry of the robot should trigger a scene graph...">mRenderGeometry</a>;
<a name="l00150"></a>00150 
<a name="l00151"></a>00151   <span class="comment">// Dynamic simulation: parameters and trajectory generation</span>
<a name="l00153"></a><a class="code" href="class_robot.html#b6f1fb00cceb130f441cfcb0148b7866">00153</a> <span class="comment"></span>  <span class="keywordtype">double</span> <a class="code" href="class_robot.html#b6f1fb00cceb130f441cfcb0148b7866" title="The simulation time of when the next change of DOF setpoints should occur.">dofUpdateTime</a>;
<a name="l00155"></a><a class="code" href="class_robot.html#32f4409aa3cb25380eecfe5fb842af35">00155</a>   <span class="keywordtype">double</span> <a class="code" href="class_robot.html#32f4409aa3cb25380eecfe5fb842af35" title="The default translational velocity (mm/sec) to use when generating cartesian trajectories...">defaultTranslVel</a>;
<a name="l00157"></a><a class="code" href="class_robot.html#54917668ac49a843242c1a98d726ea58">00157</a>   <span class="keywordtype">double</span> <a class="code" href="class_robot.html#54917668ac49a843242c1a98d726ea58" title="The default rotational velocity (rad/sec) to use when generating cartesian trajectories...">defaultRotVel</a>;
<a name="l00158"></a>00158 
<a name="l00159"></a>00159   <span class="comment">// Input from external hardware</span>
<a name="l00161"></a><a class="code" href="class_robot.html#29162c0e41d09655f82d6f04cf91aef7">00161</a> <span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="class_robot.html#29162c0e41d09655f82d6f04cf91aef7" title="Shows if this robot is to be controlled via a CyberGlove.">mUseCyberGlove</a>;
<a name="l00163"></a><a class="code" href="class_robot.html#05d83700c60f26a62436219e3f98971a">00163</a>   <a class="code" href="class_glove_interface.html" title="Interface between a GraspIt robot and the CyberGlove.">GloveInterface</a> *<a class="code" href="class_robot.html#05d83700c60f26a62436219e3f98971a" title="Provides translation between the CyberGlove and this robot&amp;#39;s DOFs.">mGloveInterface</a>;
<a name="l00165"></a><a class="code" href="class_robot.html#c16b14e1d8005489b93abad76ce60cd8">00165</a>   <span class="keywordtype">bool</span> <a class="code" href="class_robot.html#c16b14e1d8005489b93abad76ce60cd8" title="Shows if this robot is to be controlled by the Flock of Birds.">mUsesFlock</a>;
<a name="l00167"></a><a class="code" href="class_robot.html#3b709a4be340f2e40e86945ea397a2b4">00167</a>   <span class="keywordtype">int</span> <a class="code" href="class_robot.html#3b709a4be340f2e40e86945ea397a2b4" title="If robot is controlled by Flock of Birds, shows which bird it is attached to.">mBirdNumber</a>;
<a name="l00169"></a><a class="code" href="class_robot.html#979cc52eab070841fa3ebb7bdd5050ce">00169</a>   SoSeparator *<a class="code" href="class_robot.html#979cc52eab070841fa3ebb7bdd5050ce" title="Geometry for a visual model that shows where the bird is attached to the robot.">IVFlockRoot</a>;
<a name="l00171"></a><a class="code" href="class_robot.html#96106aa11140460bd262259a2e097c2f">00171</a>   <a class="code" href="class_flock_transf.html" title="A class for easy storage and manipulation of Flock of Birds transform.">FlockTransf</a> <a class="code" href="class_robot.html#96106aa11140460bd262259a2e097c2f" title="The relative tranform used for the Flock of Birds.">mFlockTran</a>;
<a name="l00172"></a>00172 
<a name="l00174"></a><a class="code" href="class_robot.html#ec9c04a136017f3739d63ec63e4a1d35">00174</a>   <a class="code" href="class_eigen_grasp_interface.html">EigenGraspInterface</a>* <a class="code" href="class_robot.html#ec9c04a136017f3739d63ec63e4a1d35" title="Holds all information about this robot&amp;#39;s eigengrasps.">mEigenGrasps</a>;
<a name="l00175"></a>00175 
<a name="l00177"></a>00177 
<a name="l00179"></a><a class="code" href="class_robot.html#c2be2fe897ec91403fca7c315b0bd658">00179</a>   <a class="code" href="classtransf.html" title="A rigid body transformation.">transf</a> <a class="code" href="class_robot.html#c2be2fe897ec91403fca7c315b0bd658" title="Pre-specified information on how to best approach an object for grasping.">approachTran</a>;
<a name="l00181"></a><a class="code" href="class_robot.html#255309e275ac2d86c171c2515bc76081">00181</a>   SoSeparator *<a class="code" href="class_robot.html#255309e275ac2d86c171c2515bc76081" title="Geometry for the visual model of the approach direction.">IVApproachRoot</a>;
<a name="l00182"></a>00182 
<a name="l00184"></a>00184   <span class="keywordtype">void</span> <a class="code" href="class_robot.html#269df7fbc56661c4e016e37f30b09958" title="Adds a visual image of the Flock of Birds sensor to the base of the robot.">addFlockSensorGeometry</a>();
<a name="l00186"></a>00186   <span class="keywordtype">void</span> <a class="code" href="class_robot.html#505599ee2d103fb0d9b58ed877a2b4c5" title="Adds a visual indicator of the pre-specified approach direction for this hand.">addApproachGeometry</a>();
<a name="l00187"></a>00187 
<a name="l00189"></a>00189   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_robot.html#f876d76d560bedc2ca01f5984634c0f3" title="Recurses to all chains of this robot and any attached robots.">simpleContactsPreventMotion</a>(<span class="keyword">const</span> <a class="code" href="classtransf.html" title="A rigid body transformation.">transf</a>&amp; motion) <span class="keyword">const</span>;
<a name="l00190"></a>00190 
<a name="l00192"></a>00192   <span class="keyword">inline</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_robot.html#9ee6d1d569d41b9ed774350a8f66ab85" title="An internal method called by setTran.">simpleSetTran</a>(<a class="code" href="classtransf.html" title="A rigid body transformation.">transf</a> <span class="keyword">const</span>&amp; tr);
<a name="l00193"></a>00193 
<a name="l00195"></a>00195   <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="class_robot.html#0948d6118b2c399104bf4e40f3d12a3f" title="Asks all chains to set the given joint values.">setJointValues</a>(<span class="keyword">const</span> <span class="keywordtype">double</span>* jointVals);
<a name="l00197"></a>00197   <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="class_robot.html#1d0ec1ca019e73ec64f9f36b75a27368" title="Asks all chains to set the given joint values, then update the position of all links...">setJointValuesAndUpdate</a>(<span class="keyword">const</span> <span class="keywordtype">double</span>* jointVals);
<a name="l00199"></a>00199   <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="class_robot.html#5229f71ea0ef819d5f204de80d4d1692" title="Gets the current joint values from the chains.">getJointValues</a>(<span class="keywordtype">double</span>* jointVals) <span class="keyword">const</span>;
<a name="l00201"></a>00201   <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="class_robot.html#26fa557e25d71b81854ee98fb0f78a50" title="Informs the dof&amp;#39;s that certain values have been set.">updateDofVals</a>(<span class="keywordtype">double</span> *dofVals);
<a name="l00203"></a>00203   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_robot.html#4ff737b5823e01287964da418ab41c0d" title="Main function for obtaining joint values from the dofs given desired dof values.">getJointValuesFromDOF</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> *desireddofVals, <span class="keywordtype">double</span> *actualDofVals,
<a name="l00204"></a>00204                                                                          <span class="keywordtype">double</span> *jointVals, <span class="keywordtype">int</span> *stoppedJoints);
<a name="l00206"></a>00206   <a class="code" href="class_matrix.html" title="A class for storing and performing operations on general 2-dimensional matrices.">Matrix</a> <a class="code" href="class_robot.html#97cf89c0de37e53b42559a4fdfd2a818" title="Gets the Jacobian matrix of Joints w.r.t. DOF.">getJacobianJointToDOF</a>(<span class="keywordtype">int</span> chainNum);
<a name="l00207"></a>00207 
<a name="l00209"></a>00209   <span class="keywordtype">bool</span> <a class="code" href="class_robot.html#1676d2e1bc44c9dc15e5727a7c11cff7" title="Attempts to set the desired dof values, detecting contacts along the way.">jumpDOFToContact</a>(<span class="keywordtype">double</span> *desiredVals, <span class="keywordtype">int</span> *stoppedJoints, <span class="keywordtype">int</span> *numCols = NULL);
<a name="l00211"></a>00211   <span class="keywordtype">int</span> <a class="code" href="class_robot.html#a86f42ecc9a7bb8af19a3701b5482df1" title="Finds the contact time between a collision and a collision-free posture.">interpolateJoints</a>(<span class="keywordtype">double</span> *initialVals, <span class="keywordtype">double</span> *finalVals, <a class="code" href="collision_structures_8h.html#56044fe7fffe7044c92ff5bfae3d56b6">CollisionReport</a> *colReport, 
<a name="l00212"></a>00212                                                 <span class="keywordtype">double</span> *interpolationTime);
<a name="l00214"></a>00214   <span class="keywordtype">void</span> <a class="code" href="class_robot.html#a299ae4e69d2152bb1e0a46b333c111f" title="Stops all the joints that affect a link that is in contact.">stopJointsFromLink</a>(<a class="code" href="class_link.html" title="Used for bodies that are part of a robot.">Link</a> *link, <span class="keywordtype">double</span> *desiredJointVals, <span class="keywordtype">int</span> *stoppedJoints);
<a name="l00215"></a>00215 
<a name="l00217"></a>00217   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_robot.html#a23d3d738d249cbb4bcdd6c634df6996" title="Adds all of the bodies that make up this robot to the given vector.">getBodyList</a>(std::vector&lt;Body*&gt; *bodies);
<a name="l00218"></a>00218 
<a name="l00219"></a>00219   <span class="keyword">friend</span> <span class="keywordtype">void</span> <a class="code" href="class_kinematic_chain.html#da3efab0e07cb21b08b97f8b228b763e" title="Set the transforms of the links to match the current joint values.">KinematicChain::updateLinkPoses</a>();
<a name="l00220"></a>00220   <span class="keyword">friend</span> <span class="keywordtype">void</span> <a class="code" href="class_robot.html#2ee2a70ad923393ba6d27f9dfddb9196" title="Attaches another robot to the end of a chain of this robot.">KinematicChain::attachRobot</a>(<a class="code" href="class_robot.html" title="Base class for all robots which are collections of links connected by moveable joints...">Robot</a> *r,<span class="keyword">const</span> <a class="code" href="classtransf.html" title="A rigid body transformation.">transf</a> &amp;offsetTr);
<a name="l00221"></a>00221 
<a name="l00222"></a>00222  <span class="keyword">public</span>:
<a name="l00223"></a>00223 
<a name="l00226"></a><a class="code" href="class_robot.html#ba80599777cf49105526a59f45d0226b">00226</a>   <a class="code" href="class_robot.html#ba80599777cf49105526a59f45d0226b">Robot</a>(<a class="code" href="class_world.html" title="The simulation world holds the world elements and handles their static and dynamic...">World</a> *w,<span class="keyword">const</span> <span class="keywordtype">char</span> *name) : <a class="code" href="class_world_element.html" title="The base class for all physical elements within the world.">WorldElement</a>(w,name) {
<a name="l00227"></a>00227     parent=NULL; parentChainNum = -1;  mountPiece=NULL;
<a name="l00228"></a>00228     <a class="code" href="class_robot.html#471d7a5e8bb073ca5d7590ced25d174c" title="The number of kinematic chains (or fingers) this robot has.">numChains</a> = <a class="code" href="class_robot.html#09dfed38d9b12b41f96e530e54d92240" title="The number of degrees of freedom this robot has.">numDOF</a> = 0; <a class="code" href="class_robot.html#918ffa00dd08447377445d26c0e9500d" title="A pointer to the base link (or palm) of the robot.">base</a> = NULL; <a class="code" href="class_robot.html#b6f1fb00cceb130f441cfcb0148b7866" title="The simulation time of when the next change of DOF setpoints should occur.">dofUpdateTime</a>=0.0;
<a name="l00229"></a>00229         <a class="code" href="class_robot.html#29162c0e41d09655f82d6f04cf91aef7" title="Shows if this robot is to be controlled via a CyberGlove.">mUseCyberGlove</a> = <span class="keyword">false</span>; <a class="code" href="class_robot.html#05d83700c60f26a62436219e3f98971a" title="Provides translation between the CyberGlove and this robot&amp;#39;s DOFs.">mGloveInterface</a> = NULL; <a class="code" href="class_robot.html#c16b14e1d8005489b93abad76ce60cd8" title="Shows if this robot is to be controlled by the Flock of Birds.">mUsesFlock</a> = <span class="keyword">false</span>;
<a name="l00230"></a>00230         <a class="code" href="class_robot.html#ec9c04a136017f3739d63ec63e4a1d35" title="Holds all information about this robot&amp;#39;s eigengrasps.">mEigenGrasps</a> = NULL; <a class="code" href="class_robot.html#2a4d46b9f9c5df1f0bd60caabf23edbd" title="Whether changes to the position / geometry of the robot should trigger a scene graph...">mRenderGeometry</a> = <span class="keyword">true</span>; <a class="code" href="class_robot.html#ce3d8196f0019c12fc8708928a3f5c8b" title="Tells us whether the state has been previously saved or not.">savedState</a> = <span class="keyword">false</span>;
<a name="l00231"></a>00231         <a class="code" href="class_robot.html#c2be2fe897ec91403fca7c315b0bd658" title="Pre-specified information on how to best approach an object for grasping.">approachTran</a> = <a class="code" href="classtransf.html#677a111eafc50b041bad5f5138e3664a" title="The Identity transform (1,0,0,0)[0,0,0].">transf::IDENTITY</a>;
<a name="l00232"></a>00232         <span class="comment">// temporary</span>
<a name="l00233"></a>00233         <a class="code" href="class_robot.html#32f4409aa3cb25380eecfe5fb842af35" title="The default translational velocity (mm/sec) to use when generating cartesian trajectories...">defaultTranslVel</a> = 50; <a class="code" href="class_robot.html#54917668ac49a843242c1a98d726ea58" title="The default rotational velocity (rad/sec) to use when generating cartesian trajectories...">defaultRotVel</a> = M_PI/4.0;
<a name="l00234"></a>00234   }
<a name="l00235"></a>00235   
<a name="l00237"></a>00237   <span class="keyword">virtual</span> <a class="code" href="class_robot.html#924320124b09c2f2ac1621aa210d5f38" title="Deletes all kinematic chains, the base and mount piece, etc.">~Robot</a>();
<a name="l00238"></a>00238 
<a name="l00239"></a>00239   <span class="comment">//--------------------------load and populate a robot-------------------------------</span>
<a name="l00240"></a>00240 
<a name="l00242"></a>00242   <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="class_robot.html#855fcd3d460f65286b4f5321fac79c7a" title="The main load function that loads all the information from XML.">loadFromXml</a>(<span class="keyword">const</span> TiXmlElement* root,QString rootPath);
<a name="l00243"></a>00243 
<a name="l00245"></a>00245   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_robot.html#5b8fdcf0a1904657ff52758c94c4331f" title="Makes this robot into a clone of the original.">cloneFrom</a>(<a class="code" href="class_robot.html" title="Base class for all robots which are collections of links connected by moveable joints...">Robot</a> *original);
<a name="l00246"></a>00246 
<a name="l00247"></a>00247   <span class="comment">//--------------------------statics-------------------------------------------------</span>
<a name="l00248"></a>00248 
<a name="l00250"></a>00250   <span class="keywordtype">bool</span> <a class="code" href="class_robot.html#47098617afecf0cd9004e5ac35ccd47e" title="The main way to move robot dofs IN STATICS. Checks collisions and finds contacts...">moveDOFToContacts</a>(<span class="keywordtype">double</span> *desiredVals, <span class="keywordtype">double</span> *desiredSteps, <span class="keywordtype">bool</span> stopAtContact, 
<a name="l00251"></a>00251                                                  <span class="keywordtype">bool</span> renderIt=<span class="keyword">false</span>);
<a name="l00252"></a>00252 
<a name="l00254"></a>00254   <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="class_robot.html#22a869d85b2ddfa9772309e9a2bcffd6" title="Sets the location (pose) of the base of this robot in the world coordinate system...">setTran</a>(<a class="code" href="classtransf.html" title="A rigid body transformation.">transf</a> <span class="keyword">const</span>&amp; tr);
<a name="l00255"></a>00255 
<a name="l00257"></a>00257   <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="class_robot.html#992f698d9b900bf275ddfc301f4fab16" title="Sets the given DOF to the given value and updates the link poses. Collisions are...">forceDOFVal</a>(<span class="keywordtype">int</span> dofNum,<span class="keywordtype">double</span> val);
<a name="l00258"></a>00258 
<a name="l00260"></a>00260   <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="class_robot.html#bc99b8a1bb508b84733e0efa67fa1df4" title="Sets the values of the DOF&amp;#39;s to the values in the array dofVals. Collisions are...">forceDOFVals</a>(<span class="keywordtype">double</span> *dofVals);
<a name="l00261"></a>00261 
<a name="l00262"></a>00262   <span class="comment">//-------------------------dynamics-------------------------------------------------</span>
<a name="l00263"></a>00263 
<a name="l00265"></a>00265   <span class="keywordtype">void</span> <a class="code" href="class_robot.html#e2f41ebd10da92db3e2b65176bae4300" title="The main way to move the robot dofs IN DYNAMICS mode.">setDesiredDOFVals</a>(<span class="keywordtype">double</span> *dofVals);
<a name="l00266"></a>00266 
<a name="l00268"></a>00268   <span class="keywordtype">bool</span> <a class="code" href="class_robot.html#d1ed8cfb1b813fc6d4784d5737cfe537" title="Returns true if any of the contacts on the fingers are slipping during dynamics.">contactSlip</a>();
<a name="l00269"></a>00269 
<a name="l00271"></a>00271   <span class="keywordtype">bool</span> <a class="code" href="class_robot.html#0e2dffc10c4d284b4006fb7a046b3d55" title="Attempt to check if the dynamic autograsp is complete.">dynamicAutograspComplete</a>();
<a name="l00272"></a>00272 
<a name="l00274"></a>00274   <span class="keywordtype">void</span> <a class="code" href="class_robot.html#7da18a9f273097884173e940f45e5ab2" title="Computes the joint angles after a dynamic step has been completed.">updateJointValuesFromDynamics</a>();
<a name="l00275"></a>00275 
<a name="l00277"></a>00277   <span class="keywordtype">void</span> <a class="code" href="class_robot.html#00d673d82837d12241859a2220fb721a" title="Applies internal joint forces (if any), such as friction or joint springs.">applyJointPassiveInternalWrenches</a>();
<a name="l00278"></a>00278 
<a name="l00280"></a>00280   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_robot.html#68e785875f61e3d3902d7cabd555663f" title="Calls the DOF controllers which set dof forces based on current and desired posture...">DOFController</a>(<span class="keywordtype">double</span> timeStep);
<a name="l00281"></a>00281 
<a name="l00283"></a>00283   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_robot.html#caf6bc556a76c8c71302bf6b0e95edbb" title="Builds dynamic constraints for all the coupled dof&amp;#39;s of this robot.">buildDOFCouplingConstraints</a>(std::map&lt;Body*,int&gt; &amp;islandIndices, <span class="keywordtype">int</span> numBodies, 
<a name="l00284"></a>00284                                                                                    <span class="keywordtype">double</span>* Nu,<span class="keywordtype">double</span> *eps,<span class="keywordtype">int</span> &amp;ncn);
<a name="l00285"></a>00285 
<a name="l00287"></a>00287   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_robot.html#22347fa908429bceadfdde8c9258e8ad" title="Builds dynamic dof limit constraints for all the dof&amp;#39;s of this robot.">buildDOFLimitConstraints</a>(std::map&lt;Body*,int&gt; &amp;islandIndices, <span class="keywordtype">int</span> numBodies, 
<a name="l00288"></a>00288                                                                             <span class="keywordtype">double</span>* H, <span class="keywordtype">double</span> *g, <span class="keywordtype">int</span> &amp;hcn);
<a name="l00289"></a>00289 
<a name="l00290"></a>00290   <span class="comment">//-------------------------get position and pose information------------------------</span>
<a name="l00291"></a>00291 
<a name="l00294"></a><a class="code" href="class_robot.html#658cc08ca10d89f4ecb65b759ddf82fe">00294</a>   <a class="code" href="classtransf.html" title="A rigid body transformation.">transf</a> <span class="keyword">const</span> &amp;<a class="code" href="class_robot.html#658cc08ca10d89f4ecb65b759ddf82fe">getTran</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="class_robot.html#918ffa00dd08447377445d26c0e9500d" title="A pointer to the base link (or palm) of the robot.">base</a>-&gt;<a class="code" href="class_body.html#f6d807feb64d61475b1a19e5b090835d">getTran</a>();}
<a name="l00295"></a>00295 
<a name="l00297"></a>00297   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_robot.html#cd8ae34f5a5569913639a5e9ae530be4" title="Computes the transform of all links in a chain for a given set of dof vals.">fwdKinematics</a>(<span class="keywordtype">double</span> *dofVals,std::vector&lt;transf&gt;&amp; trVec,<span class="keywordtype">int</span> chainNum);
<a name="l00298"></a>00298 
<a name="l00300"></a>00300   <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="class_robot.html#e36c29a2a4d25e5bb6d1be4fb42ea58c" title="Computes the dofvals that achieve a desired end pose for a chain.">invKinematics</a>(<span class="keyword">const</span> <a class="code" href="classtransf.html" title="A rigid body transformation.">transf</a>&amp; endTran,<span class="keywordtype">double</span>* dofVals, <span class="keywordtype">int</span> chainNum); 
<a name="l00301"></a>00301 
<a name="l00303"></a>00303   <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="class_robot.html#f9c5984171c733083fec50c026dbe514" title="Returns the current values of all of the DOF&amp;#39;s of the robot.">getDOFVals</a>(<span class="keywordtype">double</span> *dofVals) <span class="keyword">const</span>;
<a name="l00304"></a>00304 
<a name="l00305"></a>00305   <span class="comment">//------------------------- static checks and range of motion</span>
<a name="l00306"></a>00306 
<a name="l00308"></a>00308   <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="class_robot.html#c0d37d043c9989eb9795e1d2ddb63839" title="Returns true if all specified dof vals are within their respective legal ranges.">checkDOFVals</a>(<span class="keywordtype">double</span> *dofVals) <span class="keyword">const</span>;
<a name="l00309"></a>00309 
<a name="l00311"></a>00311   <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="class_robot.html#0f5ba2ee89bcd36708173584b9ef899d" title="Clamps the given dofVals to be within their respective legal ranges.">checkSetDOFVals</a>(<span class="keywordtype">double</span> *dofVals) <span class="keyword">const</span>;
<a name="l00312"></a>00312 
<a name="l00314"></a>00314   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_robot.html#6d63c0b70c9a4ed8958c0de1332c11b5" title="Returns true of contacts on the palm, a link or a parent robot prevent given motion...">contactsPreventMotion</a>(<span class="keyword">const</span> <a class="code" href="classtransf.html" title="A rigid body transformation.">transf</a>&amp; motion) <span class="keyword">const</span>;
<a name="l00315"></a>00315 
<a name="l00317"></a>00317   <span class="keywordtype">bool</span> <a class="code" href="class_robot.html#db5bcb404db519ce7396382942fb80a8" title="Checks if the path between current and a desired posture is free of collisions.">checkDOFPath</a>(<span class="keywordtype">double</span> *desiredVals, <span class="keywordtype">double</span> desiredStep);
<a name="l00318"></a>00318 
<a name="l00320"></a>00320   <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="class_robot.html#56cf0fd4d9202e41e49459f294b3cb1b" title="Sets the DOF values based on the current values of the joints.">updateDOFFromJoints</a>(<span class="keywordtype">double</span> *jointVals);
<a name="l00321"></a>00321 
<a name="l00323"></a>00323   <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="class_robot.html#4601ffaf9bfba4c846d1ac11b2e6e2be" title="Returns the closest distance between a joint value and its limit.">jointLimitDist</a>() <span class="keyword">const</span>;
<a name="l00324"></a>00324 
<a name="l00325"></a>00325   <span class="comment">//-------------------------connections to real input devices (CyberGlove, FLock etc.)</span>
<a name="l00326"></a>00326 
<a name="l00328"></a><a class="code" href="class_robot.html#4397b73a4ab21e78bd57ee30c631782e">00328</a>   <span class="keywordtype">bool</span> <a class="code" href="class_robot.html#4397b73a4ab21e78bd57ee30c631782e" title="Returns true if this robot is controlled by a CyberGlove.">useCyberGlove</a>(){<span class="keywordflow">return</span> <a class="code" href="class_robot.html#29162c0e41d09655f82d6f04cf91aef7" title="Shows if this robot is to be controlled via a CyberGlove.">mUseCyberGlove</a>;}
<a name="l00329"></a>00329 
<a name="l00331"></a>00331   <span class="keywordtype">void</span> <a class="code" href="class_robot.html#08cd5eba118b1fe7a27948be45d94e48" title="Sets the instance of the class which translates CyberGlove informration for this...">setGlove</a>(CyberGlove *glove);
<a name="l00332"></a>00332 
<a name="l00334"></a>00334   <span class="keywordtype">void</span> <a class="code" href="class_robot.html#1eb0fa3dc9aa30b6b05559237ee4b8c2" title="Processes a new reading from the CyberGlove.">processCyberGlove</a>();
<a name="l00335"></a>00335 
<a name="l00337"></a><a class="code" href="class_robot.html#99e76bab08e992b39ecaf1fc274a64c1">00337</a>   <a class="code" href="class_glove_interface.html" title="Interface between a GraspIt robot and the CyberGlove.">GloveInterface</a>* <a class="code" href="class_robot.html#99e76bab08e992b39ecaf1fc274a64c1" title="Returns the class that interfaces between the CyberGlove and this robot.">getGloveInterface</a>(){<span class="keywordflow">return</span> <a class="code" href="class_robot.html#05d83700c60f26a62436219e3f98971a" title="Provides translation between the CyberGlove and this robot&amp;#39;s DOFs.">mGloveInterface</a>;}
<a name="l00338"></a>00338 
<a name="l00340"></a><a class="code" href="class_robot.html#79cf661790ce74334481d60af2a4169d">00340</a>   <span class="keywordtype">int</span> <a class="code" href="class_robot.html#79cf661790ce74334481d60af2a4169d" title="Returns the number of the bird that this robot is connected to.">getBirdNumber</a>(){<span class="keywordflow">return</span> <a class="code" href="class_robot.html#3b709a4be340f2e40e86945ea397a2b4" title="If robot is controlled by Flock of Birds, shows which bird it is attached to.">mBirdNumber</a>;}
<a name="l00341"></a>00341 
<a name="l00343"></a><a class="code" href="class_robot.html#c56123efc23c6a8c615f557b4a3095cd">00343</a>   <span class="keywordtype">bool</span> <a class="code" href="class_robot.html#c56123efc23c6a8c615f557b4a3095cd" title="Returns true if this robot is connected to a Flock of Birds.">usesFlock</a>(){<span class="keywordflow">return</span> <a class="code" href="class_robot.html#c16b14e1d8005489b93abad76ce60cd8" title="Shows if this robot is to be controlled by the Flock of Birds.">mUsesFlock</a>;}
<a name="l00344"></a>00344 
<a name="l00346"></a><a class="code" href="class_robot.html#40c1f17e9803bb4550083b0868f9515c">00346</a>   <span class="keyword">const</span> <a class="code" href="class_flock_transf.html" title="A class for easy storage and manipulation of Flock of Birds transform.">FlockTransf</a>* <a class="code" href="class_robot.html#40c1f17e9803bb4550083b0868f9515c" title="Returns the transform that indicates where the flock sensor is mounted on this robot...">getFlockTran</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> &amp;<a class="code" href="class_robot.html#96106aa11140460bd262259a2e097c2f" title="The relative tranform used for the Flock of Birds.">mFlockTran</a>;}
<a name="l00347"></a>00347 
<a name="l00349"></a><a class="code" href="class_robot.html#c48f1b5473c933db1222046bcc09a35b">00349</a>   <a class="code" href="class_flock_transf.html" title="A class for easy storage and manipulation of Flock of Birds transform.">FlockTransf</a>* <a class="code" href="class_robot.html#c48f1b5473c933db1222046bcc09a35b" title="Returns the class that keeps track of flock transforms for this robot.">getFlockTran</a>(){<span class="keywordflow">return</span> &amp;<a class="code" href="class_robot.html#96106aa11140460bd262259a2e097c2f" title="The relative tranform used for the Flock of Birds.">mFlockTran</a>;}
<a name="l00350"></a>00350 
<a name="l00351"></a>00351   <span class="comment">//-------------------------eigengrasps----------------------------------------------</span>
<a name="l00352"></a>00352 
<a name="l00354"></a>00354   <span class="keywordtype">int</span> <a class="code" href="class_robot.html#9a593f99f71971df3a49547ee403be6c" title="Looks for and loads eigengrasp information from a given file.">loadEigenData</a>(QString filename);
<a name="l00355"></a>00355 
<a name="l00357"></a>00357   <span class="keywordtype">int</span> <a class="code" href="class_robot.html#082748d669c962e5e2a0cbfd27dda21d" title="Sets the trivial eigengrasp set, where we have 1 eg per dof.">useIdentityEigenData</a>();
<a name="l00358"></a>00358 
<a name="l00360"></a><a class="code" href="class_robot.html#ad884933660d4d3b82a9707986c82b20">00360</a>   <span class="keyword">const</span> <a class="code" href="class_eigen_grasp_interface.html">EigenGraspInterface</a>* <a class="code" href="class_robot.html#ad884933660d4d3b82a9707986c82b20" title="Returns the eigengrasps of this robot.">getEigenGrasps</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="class_robot.html#ec9c04a136017f3739d63ec63e4a1d35" title="Holds all information about this robot&amp;#39;s eigengrasps.">mEigenGrasps</a>;}
<a name="l00361"></a>00361 
<a name="l00363"></a><a class="code" href="class_robot.html#fcf2f890be478b31d38470a5efe9f517">00363</a>   <a class="code" href="class_eigen_grasp_interface.html">EigenGraspInterface</a>* <a class="code" href="class_robot.html#fcf2f890be478b31d38470a5efe9f517" title="Returns the eigengrasps of this robot.">getEigenGrasps</a>() {<span class="keywordflow">return</span> <a class="code" href="class_robot.html#ec9c04a136017f3739d63ec63e4a1d35" title="Holds all information about this robot&amp;#39;s eigengrasps.">mEigenGrasps</a>;}
<a name="l00364"></a>00364 
<a name="l00365"></a>00365   <span class="comment">//-------------------------save and load the state----------------------------------</span>
<a name="l00366"></a>00366 
<a name="l00368"></a>00368   <span class="keyword">virtual</span> QTextStream &amp;<a class="code" href="class_robot.html#3b7b34133e1dcabaddc4a10a6d99b4f3" title="Reads the values of all dofs from a text stream, then updates posture accordingly...">readDOFVals</a>(QTextStream &amp;is);
<a name="l00369"></a>00369 
<a name="l00371"></a>00371   <span class="keyword">virtual</span> QTextStream &amp;<a class="code" href="class_robot.html#9c3c2eb5373ef987493d733cdc932890" title="Writes the values of all dofs to a text stream.">writeDOFVals</a>(QTextStream &amp;os);
<a name="l00372"></a>00372 
<a name="l00374"></a>00374   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_robot.html#ff50d3822abab239c386000147f520ea" title="Saves the state of the robot (pose and posture). Overwrites any previously saved...">saveState</a>();
<a name="l00375"></a>00375 
<a name="l00377"></a>00377   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_robot.html#e5b4dccb42a06e62592e278e61de6e06" title="Restores the previously saved state (if any).">restoreState</a>();
<a name="l00378"></a>00378 
<a name="l00379"></a>00379   <span class="comment">//-------------------------contacts-------------------------------------------------</span>
<a name="l00380"></a>00380 
<a name="l00382"></a>00382   <span class="keywordtype">int</span> <a class="code" href="class_robot.html#8febe38572c438021598caa882367dc3" title="Returns the total number of contacts on this robot against a given body.">getNumContacts</a>(<a class="code" href="class_body.html" title="A generic simulation body.">Body</a>* body = NULL);
<a name="l00383"></a>00383 
<a name="l00385"></a>00385   std::list&lt;Contact*&gt; <a class="code" href="class_robot.html#872c4a5b354b646d2cda5b405123fedc" title="Returns all the contacts on this robot against a given body.">getContacts</a>(<a class="code" href="class_body.html" title="A generic simulation body.">Body</a>* body = NULL);
<a name="l00386"></a>00386 
<a name="l00388"></a>00388   <span class="keywordtype">void</span> <a class="code" href="class_robot.html#81ae77a54fc86c266e934bc9c1df38b1" title="Breaks all the contacts on this robot.">breakContacts</a>();
<a name="l00389"></a>00389 
<a name="l00391"></a>00391   <span class="keywordtype">int</span> <a class="code" href="class_robot.html#7502a98fbbffb65a59fa292c835523aa" title="Returns the total number of virtual contacts on this robot.">getNumVirtualContacts</a>();
<a name="l00392"></a>00392 
<a name="l00394"></a>00394   <span class="keywordtype">void</span> <a class="code" href="class_robot.html#b3b0496d895489921555786e734bc775" title="Shows or hides virtual contacts.">showVirtualContacts</a>(<span class="keywordtype">bool</span> on);
<a name="l00395"></a>00395 
<a name="l00397"></a>00397   <span class="keywordtype">int</span> <a class="code" href="class_robot.html#ee5f4f7c0574dc834e37830b09b97153" title="Looks for and loads virtual contact data from a given file.">loadContactData</a>(QString filename);
<a name="l00398"></a>00398 
<a name="l00399"></a>00399   <span class="comment">//-------------------------attached robots------------------------------------------</span>
<a name="l00400"></a>00400 
<a name="l00402"></a><a class="code" href="class_robot.html#b9b573e3c25e5601a087079831720345">00402</a>   <a class="code" href="class_robot.html" title="Base class for all robots which are collections of links connected by moveable joints...">Robot</a> *<a class="code" href="class_robot.html#b9b573e3c25e5601a087079831720345" title="Given a chain or tree of connected robots, returns a pointer to the root or base...">getBaseRobot</a>() {<span class="keywordflow">if</span> (parent) <span class="keywordflow">return</span> parent-&gt;<a class="code" href="class_robot.html#b9b573e3c25e5601a087079831720345" title="Given a chain or tree of connected robots, returns a pointer to the root or base...">getBaseRobot</a>(); <span class="keywordflow">return</span> <span class="keyword">this</span>;}
<a name="l00403"></a>00403 
<a name="l00405"></a><a class="code" href="class_robot.html#864ddd4af1d27fb2eee447bee5a763a1">00405</a>   <a class="code" href="class_robot.html" title="Base class for all robots which are collections of links connected by moveable joints...">Robot</a> *<a class="code" href="class_robot.html#864ddd4af1d27fb2eee447bee5a763a1" title="Returns a pointer to the parent robot (whose chain this robot is connected to).">getParent</a>() {<span class="keywordflow">return</span> parent;}
<a name="l00406"></a>00406 
<a name="l00408"></a><a class="code" href="class_robot.html#69247888998da1cf4733c6409d35d9db">00408</a>   <span class="keywordtype">int</span> <a class="code" href="class_robot.html#69247888998da1cf4733c6409d35d9db" title="Returns the index of the chain that this robot is connected to.">getParentChainNum</a>() {<span class="keywordflow">return</span> parentChainNum;}
<a name="l00409"></a>00409 
<a name="l00412"></a><a class="code" href="class_robot.html#a6253023aa87ef9828dcc87034027387">00412</a>   <span class="keyword">const</span> <a class="code" href="classtransf.html" title="A rigid body transformation.">transf</a> &amp;<a class="code" href="class_robot.html#a6253023aa87ef9828dcc87034027387">getTranToParentEnd</a>() {<span class="keywordflow">return</span> tranToParentEnd;}
<a name="l00413"></a>00413 
<a name="l00415"></a>00415   <span class="keywordtype">void</span> <a class="code" href="class_robot.html#e2cf0874dd148afa0bbe1732baf8cd43" title="Returns a vector of all robots attached to this one.">getAllAttachedRobots</a>(std::vector&lt;Robot *&gt; &amp;robotVec);
<a name="l00416"></a>00416 
<a name="l00418"></a>00418   <span class="keywordtype">void</span> <a class="code" href="class_robot.html#2ee2a70ad923393ba6d27f9dfddb9196" title="Attaches another robot to the end of a chain of this robot.">attachRobot</a>(<a class="code" href="class_robot.html" title="Base class for all robots which are collections of links connected by moveable joints...">Robot</a> *r,<span class="keywordtype">int</span> chainNum,<span class="keyword">const</span> <a class="code" href="classtransf.html" title="A rigid body transformation.">transf</a> &amp;offsetTr);
<a name="l00419"></a>00419 
<a name="l00421"></a>00421   <span class="keywordtype">void</span> <a class="code" href="class_robot.html#6604c02f4ecbcca5913c670bcd4b6346" title="Detaches a previously attached robot.">detachRobot</a>(<a class="code" href="class_robot.html" title="Base class for all robots which are collections of links connected by moveable joints...">Robot</a> *r);
<a name="l00422"></a>00422 
<a name="l00424"></a>00424   <a class="code" href="class_link.html" title="Used for bodies that are part of a robot.">Link</a> *<a class="code" href="class_robot.html#f7acef5ce60ba5a7b422d120989688fb" title="Loads a mount piece from a file, if this robot is atatched to another.">importMountPiece</a>(QString filename);
<a name="l00425"></a>00425 
<a name="l00427"></a><a class="code" href="class_robot.html#c05ac48ce2b522e199058a2db36a7410">00427</a>   <a class="code" href="class_link.html" title="Used for bodies that are part of a robot.">Link</a> *<a class="code" href="class_robot.html#c05ac48ce2b522e199058a2db36a7410" title="Returns a point to the mountpiece link (NULL if none exists).">getMountPiece</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> mountPiece;}
<a name="l00428"></a>00428 
<a name="l00429"></a>00429   <span class="comment">//-------------------------other functions and accessors----------------------------</span>
<a name="l00430"></a>00430 
<a name="l00431"></a>00431   <span class="keywordtype">bool</span> <a class="code" href="class_robot.html#ed365674e44d6ae90b588cd78a8a615d">snapChainToContacts</a>(<span class="keywordtype">int</span> chainNum, <a class="code" href="collision_structures_8h.html#56044fe7fffe7044c92ff5bfae3d56b6">CollisionReport</a> colReport);
<a name="l00432"></a>00432 
<a name="l00434"></a>00434   <span class="keywordtype">void</span> <a class="code" href="class_robot.html#65e48618cdb430dcbc13493486cc8952" title="Sets the name of this robot.">setName</a>(QString newName);
<a name="l00435"></a>00435 
<a name="l00437"></a>00437   <span class="keywordtype">int</span> <a class="code" href="class_robot.html#b52feb0c2450237c70f29cdde1a3a8a9" title="Return the number of links for this robot (including palm and mount piece).">getNumLinks</a>() <span class="keyword">const</span>;
<a name="l00438"></a>00438 
<a name="l00440"></a><a class="code" href="class_robot.html#0f2ed52a270b45bfd50b887ce2d0bc26">00440</a>   <span class="keywordtype">int</span> <a class="code" href="class_robot.html#0f2ed52a270b45bfd50b887ce2d0bc26" title="Returns the number of degrees of freedom for this robot.">getNumDOF</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="class_robot.html#09dfed38d9b12b41f96e530e54d92240" title="The number of degrees of freedom this robot has.">numDOF</a>;}
<a name="l00441"></a>00441 
<a name="l00443"></a><a class="code" href="class_robot.html#aea20fd59bda44999cf1cb64b348520c">00443</a>   <a class="code" href="class_d_o_f.html" title="A single degree of freedom in a robot.">DOF</a> *<a class="code" href="class_robot.html#aea20fd59bda44999cf1cb64b348520c" title="Returns a pointer to the i-th DOF.">getDOF</a>(<span class="keywordtype">int</span> i)<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="class_robot.html#9d9dabf88663411787224d4664d1d783" title="A vector of pointers to this robot&amp;#39;s DOF&amp;#39;s.">dofVec</a>[i];}
<a name="l00444"></a>00444 
<a name="l00446"></a><a class="code" href="class_robot.html#ac43d80817fad5a3d1d5c8dbcf8bc530">00446</a>   <span class="keywordtype">float</span> <a class="code" href="class_robot.html#ac43d80817fad5a3d1d5c8dbcf8bc530" title="Returns the scale of the i-th DOF dragger.">getDOFDraggerScale</a>(<span class="keywordtype">int</span> i)<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="class_robot.html#9d9dabf88663411787224d4664d1d783" title="A vector of pointers to this robot&amp;#39;s DOF&amp;#39;s.">dofVec</a>[i]-&gt;getDraggerScale();}
<a name="l00447"></a>00447 
<a name="l00449"></a><a class="code" href="class_robot.html#17fe591c5c180fb71a99203af14683b0">00449</a>   <span class="keywordtype">int</span> <a class="code" href="class_robot.html#17fe591c5c180fb71a99203af14683b0" title="Returns the number of kinematic chains in this robot.">getNumChains</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="class_robot.html#471d7a5e8bb073ca5d7590ced25d174c" title="The number of kinematic chains (or fingers) this robot has.">numChains</a>;}
<a name="l00450"></a>00450 
<a name="l00452"></a><a class="code" href="class_robot.html#2a8a861caf4da970b89203c361e8c7d0">00452</a>   <span class="keywordtype">int</span> <a class="code" href="class_robot.html#2a8a861caf4da970b89203c361e8c7d0" title="Returns the number of joints in this robot, as set when robot was loaded.">getNumJoints</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="class_robot.html#f0a0d456d8d4c926553df2f61c72a34c" title="The total number of joints of this robot. Set when robot is loaded.">numJoints</a>;}
<a name="l00453"></a>00453 
<a name="l00455"></a><a class="code" href="class_robot.html#264d6b89d0196674db84c299f1ea6c41">00455</a>   <a class="code" href="class_kinematic_chain.html" title="A serial chain of links connected by joints.">KinematicChain</a> *<a class="code" href="class_robot.html#264d6b89d0196674db84c299f1ea6c41" title="Returns a pointer to the cnumber of kinematic chains in this robot.">getChain</a>(<span class="keywordtype">int</span> i)<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="class_robot.html#d15253d797e1c5a9c3a27be9142a1e08" title="A vector of pointers to this robot&amp;#39;s kinematic chains.">chainVec</a>[i];}
<a name="l00456"></a>00456 
<a name="l00458"></a><a class="code" href="class_robot.html#4f1e7dec2cb7826320a532c7db640fd4">00458</a>   <a class="code" href="class_link.html" title="Used for bodies that are part of a robot.">Link</a> *<a class="code" href="class_robot.html#4f1e7dec2cb7826320a532c7db640fd4" title="Return a pointer to the base link of this robot.">getBase</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="class_robot.html#918ffa00dd08447377445d26c0e9500d" title="A pointer to the base link (or palm) of the robot.">base</a>;}
<a name="l00459"></a>00459 
<a name="l00461"></a>00461   <span class="keywordtype">void</span> <a class="code" href="class_robot.html#31bdce8f030605c1552c3f302bebecf4" title="Sets the transparency of the entire robot to the given value.">setTransparency</a>(<span class="keywordtype">float</span> t);
<a name="l00462"></a>00462 
<a name="l00464"></a><a class="code" href="class_robot.html#989c2a7433d3054406355482fd9ad6d9">00464</a>   <span class="keywordtype">double</span> <a class="code" href="class_robot.html#989c2a7433d3054406355482fd9ad6d9" title="Returns the default translational velocity (mm/sec) for the robot.">getDefaultTranslVel</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="class_robot.html#32f4409aa3cb25380eecfe5fb842af35" title="The default translational velocity (mm/sec) to use when generating cartesian trajectories...">defaultTranslVel</a>;}
<a name="l00465"></a>00465 
<a name="l00467"></a><a class="code" href="class_robot.html#ce83acef682ae85fe67c5103afe8a2a6">00467</a>   <span class="keywordtype">double</span> <a class="code" href="class_robot.html#ce83acef682ae85fe67c5103afe8a2a6" title="Returns the default rotational velocity (rad/sec) for the robot.">getDefaultRotVel</a>()<span class="keyword"> const  </span>{<span class="keywordflow">return</span> <a class="code" href="class_robot.html#54917668ac49a843242c1a98d726ea58" title="The default rotational velocity (rad/sec) to use when generating cartesian trajectories...">defaultRotVel</a>;}
<a name="l00468"></a>00468 
<a name="l00470"></a><a class="code" href="class_robot.html#cdc277ca31f4199107cc2197cd750b05">00470</a>   <span class="keywordtype">void</span> <a class="code" href="class_robot.html#cdc277ca31f4199107cc2197cd750b05" title="Sets the default translational velocity (mm/sec) for the robot.">setDefaultTranslVel</a>(<span class="keywordtype">double</span> v) {<a class="code" href="class_robot.html#32f4409aa3cb25380eecfe5fb842af35" title="The default translational velocity (mm/sec) to use when generating cartesian trajectories...">defaultTranslVel</a> = v;}
<a name="l00471"></a>00471 
<a name="l00473"></a><a class="code" href="class_robot.html#b69efa75d493e6d759c16deeebb2a057">00473</a>   <span class="keywordtype">void</span> <a class="code" href="class_robot.html#b69efa75d493e6d759c16deeebb2a057" title="Sets the default rotational velocity (rad/sec) for the robot.">setDefaultRotVel</a>(<span class="keywordtype">double</span> v) {<a class="code" href="class_robot.html#54917668ac49a843242c1a98d726ea58" title="The default rotational velocity (rad/sec) to use when generating cartesian trajectories...">defaultRotVel</a> = v;}
<a name="l00474"></a>00474 
<a name="l00476"></a>00476   <span class="keywordtype">void</span> <a class="code" href="class_robot.html#98825e79d62de0df3a087a57f5ce5d49" title="Enables or disables the automatic render when the pose or porture of the robot are...">setRenderGeometry</a>(<span class="keywordtype">bool</span> s);
<a name="l00477"></a>00477 
<a name="l00479"></a><a class="code" href="class_robot.html#065b0df832fdd26fdcfd666a728f6260">00479</a>   <span class="keywordtype">bool</span> <a class="code" href="class_robot.html#065b0df832fdd26fdcfd666a728f6260" title="Returns whether the automatic render flag is set.">getRenderGeometry</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="class_robot.html#2a4d46b9f9c5df1f0bd60caabf23edbd" title="Whether changes to the position / geometry of the robot should trigger a scene graph...">mRenderGeometry</a>;}
<a name="l00480"></a>00480 
<a name="l00482"></a>00482   <span class="keywordtype">void</span> <a class="code" href="class_robot.html#5d7f8c8a89c82b5221bebac4976a0346" title="Returns a vector of all links associated with this robot.">getAllLinks</a>(std::vector&lt;DynamicBody *&gt; &amp;allLinkVec);
<a name="l00483"></a>00483 
<a name="l00485"></a>00485   <span class="keywordtype">void</span> <a class="code" href="class_robot.html#eec58c22a32c612068efcac030a18854" title="Computes a smooth trajectory so that a given chain goes through a set of poses.">setChainEndTrajectory</a>(std::vector&lt;transf&gt;&amp; traj,<span class="keywordtype">int</span> chainNum);
<a name="l00486"></a>00486 
<a name="l00488"></a>00488   <span class="keywordtype">void</span> <a class="code" href="class_robot.html#d93d07c6bda9824f7883ab6befc3f2c7" title="Computes a trajectory that interpolates linearly between a start and end poses.">generateCartesianTrajectory</a>(<span class="keyword">const</span> <a class="code" href="classtransf.html" title="A rigid body transformation.">transf</a> &amp;startTr, <span class="keyword">const</span> <a class="code" href="classtransf.html" title="A rigid body transformation.">transf</a> &amp;endTr, 
<a name="l00489"></a>00489                                                                    std::vector&lt;transf&gt; &amp;traj,
<a name="l00490"></a>00490                                                                    <span class="keywordtype">double</span> startVel, <span class="keywordtype">double</span> endVel=0.0, <span class="keywordtype">double</span> timeNeeded=-1.0);
<a name="l00491"></a>00491 
<a name="l00493"></a>00493   <a class="code" href="class_matrix.html" title="A class for storing and performing operations on general 2-dimensional matrices.">Matrix</a> <a class="code" href="class_robot.html#1120ee2b640b50172f220900830eb79a" title="Accumulated the total static torques applied at each joint by all dof&amp;#39;s.">staticJointTorques</a>(<span class="keywordtype">bool</span> useDynamicDofForce);
<a name="l00494"></a>00494         
<a name="l00496"></a><a class="code" href="class_robot.html#187fa4d25a55369891fae87b63df35ac">00496</a>   <a class="code" href="classtransf.html" title="A rigid body transformation.">transf</a> <a class="code" href="class_robot.html#187fa4d25a55369891fae87b63df35ac" title="Returns the pre-defined approach direction for this robot.">getApproachTran</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="class_robot.html#c2be2fe897ec91403fca7c315b0bd658" title="Pre-specified information on how to best approach an object for grasping.">approachTran</a>;}
<a name="l00497"></a>00497 
<a name="l00499"></a>00499   <span class="keywordtype">double</span> <a class="code" href="class_robot.html#3581a9c51c47308a96e46d38522daa90" title="Tells us how far along the approach direction a given object is, within a certain...">getApproachDistance</a>(<a class="code" href="class_body.html" title="A generic simulation body.">Body</a> *<span class="keywordtype">object</span>, <span class="keywordtype">double</span> maxDist);
<a name="l00500"></a>00500 
<a name="l00501"></a>00501   <span class="comment">//---------------------------emit signals-----------------------------------------</span>
<a name="l00502"></a>00502 
<a name="l00504"></a><a class="code" href="class_robot.html#89668ad0f38f2fb988c7d50a0ee3f03e">00504</a>   <span class="keywordtype">void</span> <a class="code" href="class_robot.html#89668ad0f38f2fb988c7d50a0ee3f03e" title="Emits the configuration changed signal.">emitConfigChange</a>(){emit <a class="code" href="class_robot.html#6b57b51e1bffc38c6202da369661f7a1" title="This signal informs that dof values have changed.">configurationChanged</a>();}
<a name="l00506"></a><a class="code" href="class_robot.html#3b1c9a47b4bb2268e6772ed1f2afbd6e">00506</a>   <span class="keywordtype">void</span> <a class="code" href="class_robot.html#3b1c9a47b4bb2268e6772ed1f2afbd6e" title="Emits the user interaction start signal.">emitUserInteractionStart</a>(){emit <a class="code" href="class_robot.html#22919b77661daebdec89ce295f868491" title="This signal informs that user has begun interaction by clicking on a robot handler...">userInteractionStart</a>();}
<a name="l00508"></a><a class="code" href="class_robot.html#248b3cd07c424f3677266284dfde1dbc">00508</a>   <span class="keywordtype">void</span> <a class="code" href="class_robot.html#248b3cd07c424f3677266284dfde1dbc" title="Emits the user interaction ended signal.">emitUserInteractionEnd</a>(){emit <a class="code" href="class_robot.html#a18bb8397c8a4696f7993818c6f8ba9c" title="This signal is the complement of userInteractionStart().">userInteractionEnd</a>();}
<a name="l00509"></a>00509 };
<a name="l00510"></a>00510 
<a name="l00514"></a><a class="code" href="class_robot.html#26fa557e25d71b81854ee98fb0f78a50">00514</a> <span class="keywordtype">void</span> <a class="code" href="class_robot.html#26fa557e25d71b81854ee98fb0f78a50" title="Informs the dof&amp;#39;s that certain values have been set.">Robot::updateDofVals</a>(<span class="keywordtype">double</span> *dofVals)
<a name="l00515"></a>00515 {
<a name="l00516"></a>00516         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> d=0; d&lt;<a class="code" href="class_robot.html#09dfed38d9b12b41f96e530e54d92240" title="The number of degrees of freedom this robot has.">numDOF</a>; d++) {
<a name="l00517"></a>00517                 <a class="code" href="class_robot.html#9d9dabf88663411787224d4664d1d783" title="A vector of pointers to this robot&amp;#39;s DOF&amp;#39;s.">dofVec</a>[d]-&gt;updateVal(dofVals[d]);
<a name="l00518"></a>00518         }
<a name="l00519"></a>00519 }
<a name="l00520"></a>00520 
<a name="l00525"></a><a class="code" href="class_robot.html#0948d6118b2c399104bf4e40f3d12a3f">00525</a> <span class="keywordtype">void</span> <a class="code" href="class_robot.html#0948d6118b2c399104bf4e40f3d12a3f" title="Asks all chains to set the given joint values.">Robot::setJointValues</a>(<span class="keyword">const</span> <span class="keywordtype">double</span>* jointVals)
<a name="l00526"></a>00526 {
<a name="l00527"></a>00527         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c=0; c&lt;<a class="code" href="class_robot.html#471d7a5e8bb073ca5d7590ced25d174c" title="The number of kinematic chains (or fingers) this robot has.">numChains</a>; c++) {
<a name="l00528"></a>00528                 <a class="code" href="class_robot.html#d15253d797e1c5a9c3a27be9142a1e08" title="A vector of pointers to this robot&amp;#39;s kinematic chains.">chainVec</a>[c]-&gt;setJointValues(jointVals);
<a name="l00529"></a>00529         }
<a name="l00530"></a>00530 }
<a name="l00531"></a>00531 
<a name="l00537"></a><a class="code" href="class_robot.html#1d0ec1ca019e73ec64f9f36b75a27368">00537</a> <span class="keywordtype">void</span> <a class="code" href="class_robot.html#1d0ec1ca019e73ec64f9f36b75a27368" title="Asks all chains to set the given joint values, then update the position of all links...">Robot::setJointValuesAndUpdate</a>(<span class="keyword">const</span> <span class="keywordtype">double</span>* jointVals)
<a name="l00538"></a>00538 {
<a name="l00539"></a>00539         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c=0; c&lt;<a class="code" href="class_robot.html#471d7a5e8bb073ca5d7590ced25d174c" title="The number of kinematic chains (or fingers) this robot has.">numChains</a>; c++) {
<a name="l00540"></a>00540                 <a class="code" href="class_robot.html#d15253d797e1c5a9c3a27be9142a1e08" title="A vector of pointers to this robot&amp;#39;s kinematic chains.">chainVec</a>[c]-&gt;setJointValues(jointVals);
<a name="l00541"></a>00541                 <a class="code" href="class_robot.html#d15253d797e1c5a9c3a27be9142a1e08" title="A vector of pointers to this robot&amp;#39;s kinematic chains.">chainVec</a>[c]-&gt;updateLinkPoses();
<a name="l00542"></a>00542         }
<a name="l00543"></a>00543 }
<a name="l00544"></a>00544 
<a name="l00548"></a><a class="code" href="class_robot.html#5229f71ea0ef819d5f204de80d4d1692">00548</a> <span class="keywordtype">void</span> <a class="code" href="class_robot.html#5229f71ea0ef819d5f204de80d4d1692" title="Gets the current joint values from the chains.">Robot::getJointValues</a>(<span class="keywordtype">double</span> *jointVals)<span class="keyword"> const</span>
<a name="l00549"></a>00549 <span class="keyword"></span>{
<a name="l00550"></a>00550         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c=0; c&lt;<a class="code" href="class_robot.html#471d7a5e8bb073ca5d7590ced25d174c" title="The number of kinematic chains (or fingers) this robot has.">numChains</a>; c++) {
<a name="l00551"></a>00551                 <a class="code" href="class_robot.html#d15253d797e1c5a9c3a27be9142a1e08" title="A vector of pointers to this robot&amp;#39;s kinematic chains.">chainVec</a>[c]-&gt;getJointValues(jointVals);
<a name="l00552"></a>00552         }
<a name="l00553"></a>00553 }
<a name="l00554"></a>00554 
<a name="l00558"></a><a class="code" href="class_robot.html#4601ffaf9bfba4c846d1ac11b2e6e2be">00558</a> <span class="keywordtype">double</span> <a class="code" href="class_robot.html#4601ffaf9bfba4c846d1ac11b2e6e2be" title="Returns the closest distance between a joint value and its limit.">Robot::jointLimitDist</a>()<span class="keyword"> const</span>
<a name="l00559"></a>00559 <span class="keyword"></span>{
<a name="l00560"></a>00560         <span class="keywordtype">double</span> dist, minDist = 1.0e10;
<a name="l00561"></a>00561         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c=0; c&lt;<a class="code" href="class_robot.html#471d7a5e8bb073ca5d7590ced25d174c" title="The number of kinematic chains (or fingers) this robot has.">numChains</a>; c++) {
<a name="l00562"></a>00562                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;<a class="code" href="class_robot.html#d15253d797e1c5a9c3a27be9142a1e08" title="A vector of pointers to this robot&amp;#39;s kinematic chains.">chainVec</a>[c]-&gt;getNumJoints(); j++) {
<a name="l00563"></a>00563                         <span class="keywordtype">double</span> val = <a class="code" href="class_robot.html#d15253d797e1c5a9c3a27be9142a1e08" title="A vector of pointers to this robot&amp;#39;s kinematic chains.">chainVec</a>[c]-&gt;getJoint(j)-&gt;getVal();
<a name="l00564"></a>00564                         dist = std::min( <a class="code" href="class_robot.html#d15253d797e1c5a9c3a27be9142a1e08" title="A vector of pointers to this robot&amp;#39;s kinematic chains.">chainVec</a>[c]-&gt;getJoint(j)-&gt;getMax() - val, 
<a name="l00565"></a>00565                                                          val - <a class="code" href="class_robot.html#d15253d797e1c5a9c3a27be9142a1e08" title="A vector of pointers to this robot&amp;#39;s kinematic chains.">chainVec</a>[c]-&gt;getJoint(j)-&gt;getMin() );
<a name="l00566"></a>00566                         minDist = std::min(dist, minDist);
<a name="l00567"></a>00567                 }
<a name="l00568"></a>00568         }
<a name="l00569"></a>00569         <span class="keywordflow">return</span> minDist;
<a name="l00570"></a>00570 }
<a name="l00571"></a>00571 
<a name="l00576"></a><a class="code" href="class_robot.html#9ee6d1d569d41b9ed774350a8f66ab85">00576</a> <span class="keywordtype">void</span> <a class="code" href="class_robot.html#9ee6d1d569d41b9ed774350a8f66ab85" title="An internal method called by setTran.">Robot::simpleSetTran</a>(<a class="code" href="classtransf.html" title="A rigid body transformation.">transf</a> <span class="keyword">const</span>&amp; tr) {
<a name="l00577"></a>00577     <a class="code" href="class_robot.html#918ffa00dd08447377445d26c0e9500d" title="A pointer to the base link (or palm) of the robot.">base</a>-&gt;<a class="code" href="class_dynamic_body.html#c13f17e9d65a0b257ce85a7ba656cdf1" title="Also updates the dynamic state of the body.">setTran</a>(tr);
<a name="l00578"></a>00578     <span class="keywordflow">if</span> (mountPiece) mountPiece-&gt;<a class="code" href="class_dynamic_body.html#c13f17e9d65a0b257ce85a7ba656cdf1" title="Also updates the dynamic state of the body.">setTran</a>(tr);
<a name="l00579"></a>00579     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> f=0;f&lt;<a class="code" href="class_robot.html#471d7a5e8bb073ca5d7590ced25d174c" title="The number of kinematic chains (or fingers) this robot has.">numChains</a>;f++) <a class="code" href="class_robot.html#d15253d797e1c5a9c3a27be9142a1e08" title="A vector of pointers to this robot&amp;#39;s kinematic chains.">chainVec</a>[f]-&gt;updateLinkPoses();
<a name="l00580"></a>00580 }
<a name="l00581"></a>00581 
<a name="l00585"></a><a class="code" href="class_robot.html#f9c5984171c733083fec50c026dbe514">00585</a> <span class="keywordtype">void</span> <a class="code" href="class_robot.html#f9c5984171c733083fec50c026dbe514" title="Returns the current values of all of the DOF&amp;#39;s of the robot.">Robot::getDOFVals</a>(<span class="keywordtype">double</span> *dofVals)<span class="keyword"> const </span>{
<a name="l00586"></a>00586     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> d=0;d&lt;<a class="code" href="class_robot.html#09dfed38d9b12b41f96e530e54d92240" title="The number of degrees of freedom this robot has.">numDOF</a>;d++) dofVals[d]=<a class="code" href="class_robot.html#9d9dabf88663411787224d4664d1d783" title="A vector of pointers to this robot&amp;#39;s DOF&amp;#39;s.">dofVec</a>[d]-&gt;getVal();
<a name="l00587"></a>00587 }
<a name="l00588"></a>00588 
<a name="l00593"></a><a class="code" href="class_robot.html#992f698d9b900bf275ddfc301f4fab16">00593</a> <span class="keywordtype">void</span> <a class="code" href="class_robot.html#992f698d9b900bf275ddfc301f4fab16" title="Sets the given DOF to the given value and updates the link poses. Collisions are...">Robot::forceDOFVal</a>(<span class="keywordtype">int</span> dofNum,<span class="keywordtype">double</span> val) {
<a name="l00594"></a>00594         <span class="keywordtype">double</span> *jointVals = <span class="keyword">new</span> <span class="keywordtype">double</span>[<a class="code" href="class_robot.html#f0a0d456d8d4c926553df2f61c72a34c" title="The total number of joints of this robot. Set when robot is loaded.">numJoints</a>];
<a name="l00595"></a>00595         <a class="code" href="class_robot.html#5229f71ea0ef819d5f204de80d4d1692" title="Gets the current joint values from the chains.">getJointValues</a>(jointVals);
<a name="l00596"></a>00596         <a class="code" href="class_robot.html#9d9dabf88663411787224d4664d1d783" title="A vector of pointers to this robot&amp;#39;s DOF&amp;#39;s.">dofVec</a>[dofNum]-&gt;reset();
<a name="l00597"></a>00597         <a class="code" href="class_robot.html#9d9dabf88663411787224d4664d1d783" title="A vector of pointers to this robot&amp;#39;s DOF&amp;#39;s.">dofVec</a>[dofNum]-&gt;accumulateMove(val, jointVals, NULL);
<a name="l00598"></a>00598         <a class="code" href="class_robot.html#1d0ec1ca019e73ec64f9f36b75a27368" title="Asks all chains to set the given joint values, then update the position of all links...">setJointValuesAndUpdate</a>(jointVals);
<a name="l00599"></a>00599         <a class="code" href="class_robot.html#9d9dabf88663411787224d4664d1d783" title="A vector of pointers to this robot&amp;#39;s DOF&amp;#39;s.">dofVec</a>[dofNum]-&gt;updateVal(val);
<a name="l00600"></a>00600         <span class="keyword">delete</span> [] jointVals;
<a name="l00601"></a>00601 }
<a name="l00602"></a>00602 
<a name="l00606"></a><a class="code" href="class_robot.html#bc99b8a1bb508b84733e0efa67fa1df4">00606</a> <span class="keywordtype">void</span> <a class="code" href="class_robot.html#bc99b8a1bb508b84733e0efa67fa1df4" title="Sets the values of the DOF&amp;#39;s to the values in the array dofVals. Collisions are...">Robot::forceDOFVals</a>(<span class="keywordtype">double</span> *dofVals) {
<a name="l00607"></a>00607         <span class="keywordtype">double</span> *jointVals = <span class="keyword">new</span> <span class="keywordtype">double</span>[<a class="code" href="class_robot.html#f0a0d456d8d4c926553df2f61c72a34c" title="The total number of joints of this robot. Set when robot is loaded.">numJoints</a>];
<a name="l00608"></a>00608         <a class="code" href="class_robot.html#5229f71ea0ef819d5f204de80d4d1692" title="Gets the current joint values from the chains.">getJointValues</a>(jointVals);
<a name="l00609"></a>00609         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> d=0; d&lt;<a class="code" href="class_robot.html#09dfed38d9b12b41f96e530e54d92240" title="The number of degrees of freedom this robot has.">numDOF</a>; d++) {
<a name="l00610"></a>00610                 <a class="code" href="class_robot.html#9d9dabf88663411787224d4664d1d783" title="A vector of pointers to this robot&amp;#39;s DOF&amp;#39;s.">dofVec</a>[d]-&gt;reset();
<a name="l00611"></a>00611                 <a class="code" href="class_robot.html#9d9dabf88663411787224d4664d1d783" title="A vector of pointers to this robot&amp;#39;s DOF&amp;#39;s.">dofVec</a>[d]-&gt;accumulateMove(dofVals[d], jointVals, NULL);
<a name="l00612"></a>00612         }
<a name="l00613"></a>00613         <a class="code" href="class_robot.html#1d0ec1ca019e73ec64f9f36b75a27368" title="Asks all chains to set the given joint values, then update the position of all links...">setJointValuesAndUpdate</a>(jointVals);
<a name="l00614"></a>00614         <a class="code" href="class_robot.html#26fa557e25d71b81854ee98fb0f78a50" title="Informs the dof&amp;#39;s that certain values have been set.">updateDofVals</a>(dofVals);
<a name="l00615"></a>00615         <span class="keyword">delete</span> [] jointVals;
<a name="l00616"></a>00616 }
<a name="l00617"></a>00617 
<a name="l00621"></a><a class="code" href="class_robot.html#56cf0fd4d9202e41e49459f294b3cb1b">00621</a> <span class="keywordtype">void</span> <a class="code" href="class_robot.html#56cf0fd4d9202e41e49459f294b3cb1b" title="Sets the DOF values based on the current values of the joints.">Robot::updateDOFFromJoints</a>(<span class="keywordtype">double</span> *jointVals) {
<a name="l00622"></a>00622         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> d=0; d&lt;<a class="code" href="class_robot.html#09dfed38d9b12b41f96e530e54d92240" title="The number of degrees of freedom this robot has.">numDOF</a>; d++) {
<a name="l00623"></a>00623                 <a class="code" href="class_robot.html#9d9dabf88663411787224d4664d1d783" title="A vector of pointers to this robot&amp;#39;s DOF&amp;#39;s.">dofVec</a>[d]-&gt;updateFromJointValues(jointVals);
<a name="l00624"></a>00624         }
<a name="l00625"></a>00625 }
<a name="l00626"></a>00626 
<a name="l00628"></a><a class="code" href="class_robot.html#c0d37d043c9989eb9795e1d2ddb63839">00628</a> <span class="keywordtype">bool</span> <a class="code" href="class_robot.html#c0d37d043c9989eb9795e1d2ddb63839" title="Returns true if all specified dof vals are within their respective legal ranges.">Robot::checkDOFVals</a>(<span class="keywordtype">double</span> *dofVals)<span class="keyword"> const </span>{
<a name="l00629"></a>00629           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> d=0;d&lt;<a class="code" href="class_robot.html#09dfed38d9b12b41f96e530e54d92240" title="The number of degrees of freedom this robot has.">numDOF</a>;d++) {
<a name="l00630"></a>00630                   <span class="keywordflow">if</span> ( dofVals[d] &gt; <a class="code" href="class_robot.html#9d9dabf88663411787224d4664d1d783" title="A vector of pointers to this robot&amp;#39;s DOF&amp;#39;s.">dofVec</a>[d]-&gt;getMax()) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00631"></a>00631                   <span class="keywordflow">if</span> ( dofVals[d] &lt; <a class="code" href="class_robot.html#9d9dabf88663411787224d4664d1d783" title="A vector of pointers to this robot&amp;#39;s DOF&amp;#39;s.">dofVec</a>[d]-&gt;getMin()) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00632"></a>00632           }
<a name="l00633"></a>00633           <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00634"></a>00634 }
<a name="l00635"></a>00635 
<a name="l00639"></a><a class="code" href="class_robot.html#0f5ba2ee89bcd36708173584b9ef899d">00639</a> <span class="keywordtype">bool</span> <a class="code" href="class_robot.html#0f5ba2ee89bcd36708173584b9ef899d" title="Clamps the given dofVals to be within their respective legal ranges.">Robot::checkSetDOFVals</a>(<span class="keywordtype">double</span> *dofVals)<span class="keyword"> const </span>{
<a name="l00640"></a>00640           <span class="keywordtype">bool</span> atLeastOneValid = <span class="keyword">false</span>;
<a name="l00641"></a>00641           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> d=0;d&lt;<a class="code" href="class_robot.html#09dfed38d9b12b41f96e530e54d92240" title="The number of degrees of freedom this robot has.">numDOF</a>;d++) {
<a name="l00642"></a>00642                   <span class="keywordflow">if</span> ( dofVals[d] &gt; <a class="code" href="class_robot.html#9d9dabf88663411787224d4664d1d783" title="A vector of pointers to this robot&amp;#39;s DOF&amp;#39;s.">dofVec</a>[d]-&gt;getMax()) {
<a name="l00643"></a>00643                           dofVals[d] = <a class="code" href="class_robot.html#9d9dabf88663411787224d4664d1d783" title="A vector of pointers to this robot&amp;#39;s DOF&amp;#39;s.">dofVec</a>[d]-&gt;getMax();
<a name="l00644"></a>00644                   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( dofVals[d] &lt; <a class="code" href="class_robot.html#9d9dabf88663411787224d4664d1d783" title="A vector of pointers to this robot&amp;#39;s DOF&amp;#39;s.">dofVec</a>[d]-&gt;getMin()) {
<a name="l00645"></a>00645                           dofVals[d] = <a class="code" href="class_robot.html#9d9dabf88663411787224d4664d1d783" title="A vector of pointers to this robot&amp;#39;s DOF&amp;#39;s.">dofVec</a>[d]-&gt;getMin();
<a name="l00646"></a>00646                   }
<a name="l00647"></a>00647                   <span class="keywordflow">else</span> atLeastOneValid = <span class="keyword">true</span>;
<a name="l00648"></a>00648           }
<a name="l00649"></a>00649           <span class="keywordflow">return</span> atLeastOneValid;
<a name="l00650"></a>00650 }
<a name="l00651"></a>00651 
<a name="l00652"></a>00652 
<a name="l00654"></a>00654 
<a name="l00667"></a><a class="code" href="class_hand.html">00667</a> <span class="keyword">class </span><a class="code" href="class_hand.html" title="A hand is a special type of robot that can have a grasp associated with it.">Hand</a> : <span class="keyword">public</span> <a class="code" href="class_robot.html" title="Base class for all robots which are collections of links connected by moveable joints...">Robot</a> {
<a name="l00668"></a>00668   Q_OBJECT
<a name="l00669"></a>00669 
<a name="l00670"></a>00670 <span class="keyword">protected</span>:
<a name="l00672"></a><a class="code" href="class_hand.html#82078cf48a3f7ee6f399143d410b3250">00672</a>   <a class="code" href="class_grasp.html" title="A grasp occurs between a hand and an object and has quality measures associated with...">Grasp</a> *<a class="code" href="class_hand.html#82078cf48a3f7ee6f399143d410b3250" title="A pointer to the grasp associated with this hand.">grasp</a>;
<a name="l00673"></a>00673 
<a name="l00674"></a>00674 <span class="keyword">public</span>:
<a name="l00676"></a>00676   <a class="code" href="class_hand.html#94d81b3f41ec74eb12c82475f536679a" title="Constructs the instance of the Grasp, then calls the Robot constructor.">Hand</a>(<a class="code" href="class_world.html" title="The simulation world holds the world elements and handles their static and dynamic...">World</a> *w,<span class="keyword">const</span> <span class="keywordtype">char</span> *name);
<a name="l00678"></a>00678   <span class="keyword">virtual</span> <a class="code" href="class_hand.html#7ff29a6f23f98c5e57f44d23a76912be" title="Also deletes the instance of the Grasp.">~Hand</a>();
<a name="l00679"></a>00679 
<a name="l00681"></a>00681   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_hand.html#0f3cd1fc5076bd1eb52ede6622647594" title="Clones this hand from another.">cloneFrom</a>(<a class="code" href="class_hand.html" title="A hand is a special type of robot that can have a grasp associated with it.">Hand</a> *original);
<a name="l00682"></a>00682 
<a name="l00685"></a><a class="code" href="class_hand.html#e53b2977d428858d5e16a9bc76122a0a">00685</a>   <span class="keywordtype">int</span> <a class="code" href="class_hand.html#e53b2977d428858d5e16a9bc76122a0a">getNumFingers</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="class_robot.html#471d7a5e8bb073ca5d7590ced25d174c" title="The number of kinematic chains (or fingers) this robot has.">numChains</a>;}
<a name="l00686"></a>00686 
<a name="l00688"></a><a class="code" href="class_hand.html#5a576721206c3eab6fb6c67c252fc570">00688</a>   <a class="code" href="class_kinematic_chain.html" title="A serial chain of links connected by joints.">KinematicChain</a> *<a class="code" href="class_hand.html#5a576721206c3eab6fb6c67c252fc570">getFinger</a>(<span class="keywordtype">int</span> i)<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="class_robot.html#d15253d797e1c5a9c3a27be9142a1e08" title="A vector of pointers to this robot&amp;#39;s kinematic chains.">chainVec</a>[i];}
<a name="l00689"></a>00689 
<a name="l00691"></a><a class="code" href="class_hand.html#ef4aee626b9446b1972f7c34437b7de6">00691</a>   <a class="code" href="class_link.html" title="Used for bodies that are part of a robot.">Link</a> *<a class="code" href="class_hand.html#ef4aee626b9446b1972f7c34437b7de6">getPalm</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="class_robot.html#918ffa00dd08447377445d26c0e9500d" title="A pointer to the base link (or palm) of the robot.">base</a>;}
<a name="l00692"></a>00692 
<a name="l00694"></a><a class="code" href="class_hand.html#d544b5f061d3e43713a0227eca30785a">00694</a>   <a class="code" href="class_grasp.html" title="A grasp occurs between a hand and an object and has quality measures associated with...">Grasp</a> *<a class="code" href="class_hand.html#d544b5f061d3e43713a0227eca30785a">getGrasp</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="class_hand.html#82078cf48a3f7ee6f399143d410b3250" title="A pointer to the grasp associated with this hand.">grasp</a>;}
<a name="l00695"></a>00695 
<a name="l00697"></a>00697   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_hand.html#6479e951ab2a39830c0e46a71e660622" title="Closes all fingers in a direction pre-specified (usually in config file).">autoGrasp</a>(<span class="keywordtype">bool</span> renderIt, <span class="keywordtype">double</span> speedFactor = 1.0, <span class="keywordtype">bool</span> stopAtContact = <span class="keyword">false</span>);
<a name="l00698"></a>00698 
<a name="l00700"></a>00700   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_hand.html#5d9e3ff2dd13319165c3497512b23231" title="Opens the fingers in the opposite direction of autoGrasp.">quickOpen</a>(<span class="keywordtype">double</span> speedFactor = 0.1);
<a name="l00701"></a>00701 
<a name="l00703"></a>00703   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_hand.html#dd688849630b7f7ba22d41b90881aa29" title="Moves the hand in the pre-specified approach direction until contact is made.">approachToContact</a>(<span class="keywordtype">double</span> moveDist, <span class="keywordtype">bool</span> oneStep = <span class="keyword">true</span>);
<a name="l00704"></a>00704 
<a name="l00706"></a>00706   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_hand.html#7ecd5e48218e86ffbd85401a739ff3a0" title="Moves the hand back until it is out of collision, then forward until a contact is...">findInitialContact</a>(<span class="keywordtype">double</span> moveDist);
<a name="l00707"></a>00707 };
<a name="l00708"></a>00708 
<a name="l00709"></a>00709 <span class="preprocessor">#define ROBOT_H</span>
<a name="l00710"></a>00710 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00711"></a>00711 <span class="preprocessor"></span>
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Jul 24 16:39:07 2009 for Graspit by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
