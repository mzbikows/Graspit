<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Graspit: grasp_tester Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>grasp_tester Class Reference</h1><!-- doxytag: class="grasp_tester" -->This class is used to evaluate a set of candidate grasps.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="grasp__tester_8h-source.html">grasp_tester.h</a>&gt;</code>
<p>

<p>
<a href="classgrasp__tester-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Signals</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgrasp__tester.html#9791b2d3e5e90685504b5349eaacea7a">testingComplete</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgrasp__tester.html#d5e19ad1fd65bdfeae5a58a00d601907">grasp_tester</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgrasp__tester.html#5fa0b5f60b50dbbd2e35755a326097a8">~grasp_tester</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgrasp__tester.html#aebb486a09f84263a837ebd2a1958c30">setupGraspVisWindow</a> (<a class="el" href="class_graspable_body.html">GraspableBody</a> *myBody, SoGroup *prim)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgrasp__tester.html#59404a1246ae05f197febb0a1d7528f7">visualizePlannedGrasps</a> (std::list&lt; <a class="el" href="classplanned_grasp.html">plannedGrasp</a> * &gt; grList)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgrasp__tester.html#b200507d8607eabf3d88d6e9c064a981">callTestIt</a> (std::list&lt; <a class="el" href="classplanned_grasp.html">plannedGrasp</a> * &gt; &amp;graspList_in, bool render_in)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgrasp__tester.html#a819ed61f5da1b3b912a2eabb9773953">set_testingParameters</a> (int itStepNr, double stepSize)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgrasp__tester.html#13988bb9085ae762d58a67d54dde5fb5">get_testingParameters</a> (int &amp;itStepNr, double &amp;stepSize)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgrasp__tester.html#51c138837810992ce989a136cea91be1">useQM</a> (int qmNum)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgrasp__tester.html#c25bd3872e19cebcbb703435c2960cb4">saveGraspsToFile</a> (const QString &amp;filename, bool append)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgrasp__tester.html#42ee2bcad42de44aab0e0366980452c1">continueTests</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgrasp__tester.html#fddbe6d3f83f8d842c015d4c2b167519">pauseTests</a> ()</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This class is used to evaluate a set of candidate grasps. 
<p>
Given a set of candidate grasps to test, this will perform each one and evaluate it using a quality measure of the user's choice. For each grasp it performs the following steps:<p>
<ul>
<li>Place and orient the hand at the starting pose of the candidate grasp</li><li>Set the hand DOF values to the <a class="el" href="classpreshape.html" title="Holds the grasp preshape type and the DOF values for that presahpe.">preshape</a> specified</li><li>Make sure there are no collisions with other obstacles</li><li>Move the hand along the approach vector until contact occurs</li><li>Check that there is at least on contact with the object to be grasped</li><li>Close the fingers until contact blocks further movement</li><li>Evaluate the grasp</li></ul>
<p>
If it is not a force closure grasp, it moves the hand back by a small step and tries the grasp again. This is repeated until a force closure grasp is found or a max number of back steps is reached. The results of the evaluations can be saved in a text file.<p>
In order to allow user interaction during the testing process (it takes a while), an Inventor idle sensor is used to test one grasp at a time when the system is otherwise idle.<p>
This class also handles setting up the grasp visualization window which shows all the <a class="el" href="classposition.html" title="A 3-dimensional position and methods to operate on them.">position</a> and orientation of all candidate grasps with respect to the object or the shape primitives. As the testing process continues, this is updated to show the relative quality of each evaluated grasp.<p>
The result after testing is a list of the force closure grasps sorted in quality order from best to worst.<p>
When the testing is complete a signal is emitted (which is why this class must be derived from QObject). <hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="d5e19ad1fd65bdfeae5a58a00d601907"></a><!-- doxytag: member="grasp_tester::grasp_tester" ref="d5e19ad1fd65bdfeae5a58a00d601907" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">grasp_tester::grasp_tester           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initializes variables to default values. 
</div>
</div><p>
<a class="anchor" name="5fa0b5f60b50dbbd2e35755a326097a8"></a><!-- doxytag: member="grasp_tester::~grasp_tester" ref="5fa0b5f60b50dbbd2e35755a326097a8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">grasp_tester::~grasp_tester           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Puts the hand back where it was originally before testing began. If we used a separate world for testing this would not be necessary. 
</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="b200507d8607eabf3d88d6e9c064a981"></a><!-- doxytag: member="grasp_tester::callTestIt" ref="b200507d8607eabf3d88d6e9c064a981" args="(std::list&lt; plannedGrasp * &gt; &amp;graspList_in, bool render_in)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool grasp_tester::callTestIt           </td>
          <td>(</td>
          <td class="paramtype">std::list&lt; <a class="el" href="classplanned_grasp.html">plannedGrasp</a> * &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>graspList_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>render_in</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Begins the testing process. The list of grasps to test is provided in <em>graspList_in</em> , and <em>render_in</em> controls whether the movement of the hand will be shown during the testing process. It helps to understand what is going on, but slows down the process.<p>
This saves the current hand configuration, so that after testing is complete it can be returned to it's original state. However, we may want to create a separate copy of the main world in which to perform the testing, so we don't make any changes to the main world.<p>
An Inventor idleSensor is created to call the testing callback whenever the user is idle. This means that the testing won't interfere with user interaction like changing the camera viewpoint. 
</div>
</div><p>
<a class="anchor" name="42ee2bcad42de44aab0e0366980452c1"></a><!-- doxytag: member="grasp_tester::continueTests" ref="42ee2bcad42de44aab0e0366980452c1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void grasp_tester::continueTests           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates a new idleSensor to call the testing callback. This will resume testing from wherever it left off. 
</div>
</div><p>
<a class="anchor" name="13988bb9085ae762d58a67d54dde5fb5"></a><!-- doxytag: member="grasp_tester::get_testingParameters" ref="13988bb9085ae762d58a67d54dde5fb5" args="(int &amp;itStepNr, double &amp;stepSize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void grasp_tester::get_testingParameters           </td>
          <td>(</td>
          <td class="paramtype">int &amp;&nbsp;</td>
          <td class="paramname"> <em>itStepNr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&nbsp;</td>
          <td class="paramname"> <em>stepSize</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the values of the testing parameters. 
</div>
</div><p>
<a class="anchor" name="fddbe6d3f83f8d842c015d4c2b167519"></a><!-- doxytag: member="grasp_tester::pauseTests" ref="fddbe6d3f83f8d842c015d4c2b167519" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void grasp_tester::pauseTests           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Deletes the idleSensor so that the testing process will stop, but can be resumed later. 
</div>
</div><p>
<a class="anchor" name="c25bd3872e19cebcbb703435c2960cb4"></a><!-- doxytag: member="grasp_tester::saveGraspsToFile" ref="c25bd3872e19cebcbb703435c2960cb4" args="(const QString &amp;filename, bool append)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void grasp_tester::saveGraspsToFile           </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>append</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Opens a text result file with the name <em>filename</em> to which the results of the evaluations will be saved. The results are saved such that each line represents one tested grasps. Each line has the following format:<ul>
<li>first 3 numbers are the world <a class="el" href="classposition.html" title="A 3-dimensional position and methods to operate on them.">position</a> of the palm</li><li>the next 4 are the components of a quaternion representing the hand orientation,</li><li>the next 1 is the spread angle of the fingers in radians</li><li>the last 1 is the value of the quality metric used for evaluation</li></ul>
<p>
If <em>append</em> is TRUE, the results will be appended to an existing file. In this case a line of 0's with a quality result of -2 is added at the end of the file before the new results to mark a new set of grasps. 
</div>
</div><p>
<a class="anchor" name="a819ed61f5da1b3b912a2eabb9773953"></a><!-- doxytag: member="grasp_tester::set_testingParameters" ref="a819ed61f5da1b3b912a2eabb9773953" args="(int itStepNr, double stepSize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool grasp_tester::set_testingParameters           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>itStepNr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>stepSize</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sets the testing parameters. <em>itStepNr</em> is the max number of backsteps that can be taken, and <em>stepSize</em> is the length in millimeters of each backstep. 
</div>
</div><p>
<a class="anchor" name="aebb486a09f84263a837ebd2a1958c30"></a><!-- doxytag: member="grasp_tester::setupGraspVisWindow" ref="aebb486a09f84263a837ebd2a1958c30" args="(GraspableBody *myBody, SoGroup *prim)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void grasp_tester::setupGraspVisWindow           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_graspable_body.html">GraspableBody</a> *&nbsp;</td>
          <td class="paramname"> <em>myBody</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SoGroup *&nbsp;</td>
          <td class="paramname"> <em>prim</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sets up the grasp visualization window. If one exists already it is deleted. The window consists of a render area, and the scene graph uses the same camera as the main viewer. The primitives sub-graph, pointed to by <em>prim</em> , is added using the same transform as <em>myBody</em> has in the main world. The candidate grasps can then be added to this scene later. 
</div>
</div><p>
<a class="anchor" name="9791b2d3e5e90685504b5349eaacea7a"></a><!-- doxytag: member="grasp_tester::testingComplete" ref="9791b2d3e5e90685504b5349eaacea7a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void grasp_tester::testingComplete           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This signal is emitted after the last grasp has been tested. 
</div>
</div><p>
<a class="anchor" name="51c138837810992ce989a136cea91be1"></a><!-- doxytag: member="grasp_tester::useQM" ref="51c138837810992ce989a136cea91be1" args="(int qmNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void grasp_tester::useQM           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>qmNum</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sets the index of the quality measure to use for evalutation. 
</div>
</div><p>
<a class="anchor" name="59404a1246ae05f197febb0a1d7528f7"></a><!-- doxytag: member="grasp_tester::visualizePlannedGrasps" ref="59404a1246ae05f197febb0a1d7528f7" args="(std::list&lt; plannedGrasp * &gt; grList)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void grasp_tester::visualizePlannedGrasps           </td>
          <td>(</td>
          <td class="paramtype">std::list&lt; <a class="el" href="classplanned_grasp.html">plannedGrasp</a> * &gt;&nbsp;</td>
          <td class="paramname"> <em>grList</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Given a list of candidate grasps, <em>grList</em> , this creates a new grasp representation for each one. These representations can be seen in the grasp visualization window. 
</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>C:/Documents and Settings/cmatei/My Documents/GraspitVersions/Graspit-2-1/include/Planner/<a class="el" href="grasp__tester_8h-source.html">grasp_tester.h</a><li>C:/Documents and Settings/cmatei/My Documents/GraspitVersions/Graspit-2-1/debug/moc_grasp_tester.cpp<li>C:/Documents and Settings/cmatei/My Documents/GraspitVersions/Graspit-2-1/src/Planner/<a class="el" href="grasp__tester_8cpp.html">grasp_tester.cpp</a></ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Jul 24 16:39:12 2009 for Graspit by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
