<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Graspit: BreakAwayDOF Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>BreakAwayDOF Class Reference</h1><!-- doxytag: class="BreakAwayDOF" --><!-- doxytag: inherits="RigidDOF" --><code>#include &lt;<a class="el" href="dof_8h-source.html">dof.h</a>&gt;</code>
<p>
<div class="dynheader">
Inheritance diagram for BreakAwayDOF:</div>
<div class="dynsection">

<p><center><img src="class_break_away_d_o_f.png" usemap="#BreakAwayDOF_map" border="0" alt=""></center>
<map name="BreakAwayDOF_map">
<area href="class_rigid_d_o_f.html" alt="RigidDOF" shape="rect" coords="0,56,104,80">
<area href="class_d_o_f.html" alt="DOF" shape="rect" coords="0,0,104,24">
</map>
</div>

<p>
<a href="class_break_away_d_o_f-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d07cea7dcd0393adfd9cb3e106fae65a"></a><!-- doxytag: member="BreakAwayDOF::getType" ref="d07cea7dcd0393adfd9cb3e106fae65a" args="() const " -->
Type&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_break_away_d_o_f.html#d07cea7dcd0393adfd9cb3e106fae65a">getType</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the type of this <a class="el" href="class_d_o_f.html" title="A single degree of freedom in a robot.">DOF</a>. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="80a8b9940b002416b7b40c5e19190df1"></a><!-- doxytag: member="BreakAwayDOF::BreakAwayDOF" ref="80a8b9940b002416b7b40c5e19190df1" args="(BreakAwayDOF *original)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>BreakAwayDOF</b> (<a class="el" href="class_break_away_d_o_f.html">BreakAwayDOF</a> *original)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="b865f84dcc2b8428ea87c8a88c47d698"></a><!-- doxytag: member="BreakAwayDOF::initDOF" ref="b865f84dcc2b8428ea87c8a88c47d698" args="(Robot *myRobot, const std::list&lt; Joint * &gt; &amp;jList)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_break_away_d_o_f.html#b865f84dcc2b8428ea87c8a88c47d698">initDOF</a> (<a class="el" href="class_robot.html">Robot</a> *myRobot, const std::list&lt; <a class="el" href="class_joint.html">Joint</a> * &gt; &amp;jList)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes breakaway flags. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_break_away_d_o_f.html#2b92aeaa1f5d442554a96abafa3f21e5">accumulateMove</a> (double q1, double *jointVals, int *stoppedJoints)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Takes breakaway into account.  <a href="#2b92aeaa1f5d442554a96abafa3f21e5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_break_away_d_o_f.html#ba9f9816966f89b4167a7be353639bed">updateFromJointValues</a> (const double *jointVals=NULL)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Looks at a joint that's not in breakaway.  <a href="#ba9f9816966f89b4167a7be353639bed"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="5ca3a736d263f6ede093c8b1e1cbcc2b"></a><!-- doxytag: member="BreakAwayDOF::updateVal" ref="5ca3a736d263f6ede093c8b1e1cbcc2b" args="(double q1)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_break_away_d_o_f.html#5ca3a736d263f6ede093c8b1e1cbcc2b">updateVal</a> (double q1)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets breakaway values if breakaway has occured. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_break_away_d_o_f.html#cb1f6c19915bc5e4c761c968a6169018">getJointValues</a> (double *jointVals) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Takes breakaway into account.  <a href="#cb1f6c19915bc5e4c761c968a6169018"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_break_away_d_o_f.html#20b0d9c11c4b3cc9f57aa90637cb1d9b">reset</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Clears all breakaway flags, re-enages all joints.  <a href="#20b0d9c11c4b3cc9f57aa90637cb1d9b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_break_away_d_o_f.html#b94e0cd25d9e86528e37c118db5c15e2">computeStaticJointTorques</a> (double *jointTorques, double dofForce=-1)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Applies breakaway torques.  <a href="#b94e0cd25d9e86528e37c118db5c15e2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="08dcea13b5c40fe45c038b26f3ec64b3"></a><!-- doxytag: member="BreakAwayDOF::writeToStream" ref="08dcea13b5c40fe45c038b26f3ec64b3" args="(QTextStream &amp;stream)" -->
virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_break_away_d_o_f.html#08dcea13b5c40fe45c038b26f3ec64b3">writeToStream</a> (QTextStream &amp;stream)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Also writes the breakaway status. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="2b2c0f43f8fd6504a0769ddbbc882f48"></a><!-- doxytag: member="BreakAwayDOF::readFromStream" ref="2b2c0f43f8fd6504a0769ddbbc882f48" args="(QTextStream &amp;stream)" -->
virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_break_away_d_o_f.html#2b2c0f43f8fd6504a0769ddbbc882f48">readFromStream</a> (QTextStream &amp;stream)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Also reads in the breakaway status. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="7144f0b863ede3341725bdebb3bc9741"></a><!-- doxytag: member="BreakAwayDOF::readParametersFromXml" ref="7144f0b863ede3341725bdebb3bc9741" args="(const TiXmlElement *root)" -->
virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_break_away_d_o_f.html#7144f0b863ede3341725bdebb3bc9741">readParametersFromXml</a> (const TiXmlElement *root)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Also reads in the breakaway torque level. <br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
The <a class="el" href="class_break_away_d_o_f.html">BreakAwayDOF</a> is a model of the <a class="el" href="class_barrett.html" title="The Barrett hand has its own dedicated class so it can speak to a real Barrett hand...">Barrett</a> <a class="el" href="class_hand.html" title="A hand is a special type of robot that can have a grasp associated with it.">Hand</a> finger DOFs. If a proximal joint is stopped by contact, the transmission breaks away from that joint and distal joints continue to close. However, a joint that has been disengaged is only re-engaged when the <a class="el" href="class_d_o_f.html" title="A single degree of freedom in a robot.">DOF</a> goes back to the value that is had when the joint was disengaged.<p>
Dynamically, breakaway happens when a torque limit on breakaway joints is exceeded. We take that into account in the static joint torque computation. However, for the moment, the dynamics engine does not take that into account.<p>
This class assumes that breakaway only function in one direction, towards the max value of the dof. In real life this is true, as the barrett hand disengages finger joints only when the finger is closing. In simulation, this also helps because it removes any ambiguity when you have to decide what the dof value is based only on joint values. <hr><h2>Member Function Documentation</h2>
<a class="anchor" name="2b92aeaa1f5d442554a96abafa3f21e5"></a><!-- doxytag: member="BreakAwayDOF::accumulateMove" ref="2b92aeaa1f5d442554a96abafa3f21e5" args="(double q1, double *jointVals, int *stoppedJoints)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BreakAwayDOF::accumulateMove           </td>
          <td>(</td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>q1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>jointVals</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>stoppedJoints</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Takes breakaway into account. 
<p>
If proximal joints are stopped or in breakaway, distal joints continue to close when the dof is moving in the positive direction. 
<p>Reimplemented from <a class="el" href="class_rigid_d_o_f.html#73e2a88aaa63e907b8e3511091692793">RigidDOF</a>.</p>

</div>
</div><p>
<a class="anchor" name="b94e0cd25d9e86528e37c118db5c15e2"></a><!-- doxytag: member="BreakAwayDOF::computeStaticJointTorques" ref="b94e0cd25d9e86528e37c118db5c15e2" args="(double *jointTorques, double dofForce=&#45;1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BreakAwayDOF::computeStaticJointTorques           </td>
          <td>(</td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>jointTorques</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>dofForce</em> = <code>-1</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Applies breakaway torques. 
<p>
We assume that any joint that is in breakaway is applying exactly the breakaway torque. This is probably not accurate, as after breakaway occurs, the joint is disengaged. But it is accurate in the sense that no joint can apply more than the breakaway torque. 
<p>Reimplemented from <a class="el" href="class_rigid_d_o_f.html#070a07c1e14a147cdb0f88a6a62b7ebf">RigidDOF</a>.</p>

</div>
</div><p>
<a class="anchor" name="cb1f6c19915bc5e4c761c968a6169018"></a><!-- doxytag: member="BreakAwayDOF::getJointValues" ref="cb1f6c19915bc5e4c761c968a6169018" args="(double *jointVals) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BreakAwayDOF::getJointValues           </td>
          <td>(</td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>jointVals</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Takes breakaway into account. 
<p>
Each joint is either in breakaway, or connected to the dof value by it's static ratio. 
<p>Reimplemented from <a class="el" href="class_rigid_d_o_f.html#1aca11dff7bd812fc86573eb9710de58">RigidDOF</a>.</p>

</div>
</div><p>
<a class="anchor" name="20b0d9c11c4b3cc9f57aa90637cb1d9b"></a><!-- doxytag: member="BreakAwayDOF::reset" ref="20b0d9c11c4b3cc9f57aa90637cb1d9b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BreakAwayDOF::reset           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Clears all breakaway flags, re-enages all joints. 
<p>
Clears all the breakaway flags, effectively re-engaging all joints. 
<p>Reimplemented from <a class="el" href="class_rigid_d_o_f.html#4dd6a66125cc980558c3e2fe10574ab3">RigidDOF</a>.</p>

</div>
</div><p>
<a class="anchor" name="ba9f9816966f89b4167a7be353639bed"></a><!-- doxytag: member="BreakAwayDOF::updateFromJointValues" ref="ba9f9816966f89b4167a7be353639bed" args="(const double *jointVals=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BreakAwayDOF::updateFromJointValues           </td>
          <td>(</td>
          <td class="paramtype">const double *&nbsp;</td>
          <td class="paramname"> <em>jointVals</em> = <code>NULL</code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Looks at a joint that's not in breakaway. 
<p>
For this type of dof, the value of any joint that is not in breakaway can give us the value of the dof. 
<p>Reimplemented from <a class="el" href="class_rigid_d_o_f.html#22af273a09680c034c7cbc33db22d2d8">RigidDOF</a>.</p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>C:/Documents and Settings/cmatei/My Documents/GraspitVersions/Graspit-2-1/include/<a class="el" href="dof_8h-source.html">dof.h</a><li>C:/Documents and Settings/cmatei/My Documents/GraspitVersions/Graspit-2-1/src/dof.cpp</ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Jul 24 16:39:10 2009 for Graspit by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
