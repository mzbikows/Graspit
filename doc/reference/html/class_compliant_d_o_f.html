<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Graspit: CompliantDOF Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>CompliantDOF Class Reference</h1><!-- doxytag: class="CompliantDOF" --><!-- doxytag: inherits="DOF" --><code>#include &lt;<a class="el" href="dof_8h-source.html">dof.h</a>&gt;</code>
<p>
<div class="dynheader">
Inheritance diagram for CompliantDOF:</div>
<div class="dynsection">

<p><center><img src="class_compliant_d_o_f.png" usemap="#CompliantDOF_map" border="0" alt=""></center>
<map name="CompliantDOF_map">
<area href="class_d_o_f.html" alt="DOF" shape="rect" coords="0,0,94,24">
</map>
</div>

<p>
<a href="class_compliant_d_o_f-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ae43ee4f364013d449e40378c92338d2"></a><!-- doxytag: member="CompliantDOF::CompliantDOF" ref="ae43ee4f364013d449e40378c92338d2" args="(CompliantDOF *original)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>CompliantDOF</b> (<a class="el" href="class_compliant_d_o_f.html">CompliantDOF</a> *original)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="6209abb20c0c9865f4713721a8f90cdd"></a><!-- doxytag: member="CompliantDOF::getType" ref="6209abb20c0c9865f4713721a8f90cdd" args="() const " -->
Type&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_compliant_d_o_f.html#6209abb20c0c9865f4713721a8f90cdd">getType</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the type of this <a class="el" href="class_d_o_f.html" title="A single degree of freedom in a robot.">DOF</a>. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="5d331b2eb999121291322c2b0db1ddd2"></a><!-- doxytag: member="CompliantDOF::initDOF" ref="5d331b2eb999121291322c2b0db1ddd2" args="(Robot *myRobot, const std::list&lt; Joint * &gt; &amp;jList)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_compliant_d_o_f.html#5d331b2eb999121291322c2b0db1ddd2">initDOF</a> (<a class="el" href="class_robot.html">Robot</a> *myRobot, const std::list&lt; <a class="el" href="class_joint.html">Joint</a> * &gt; &amp;jList)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Makes sure all the joints have spring stiffness defined. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="db76f80c90eeaca0456ba943ea71cf18"></a><!-- doxytag: member="CompliantDOF::getStaticRatio" ref="db76f80c90eeaca0456ba943ea71cf18" args="(Joint *j) const " -->
virtual double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_compliant_d_o_f.html#db76f80c90eeaca0456ba943ea71cf18">getStaticRatio</a> (<a class="el" href="class_joint.html">Joint</a> *j) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Static ratio depends on both coupling ratio and joint spring ratio. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="00d63d49da1b375e8e3c31451b77e5ed"></a><!-- doxytag: member="CompliantDOF::getJointValues" ref="00d63d49da1b375e8e3c31451b77e5ed" args="(double *jointVals) const " -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_compliant_d_o_f.html#00d63d49da1b375e8e3c31451b77e5ed">getJointValues</a> (double *jointVals) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the values as if no contact were present and links were free. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="95fd530d923a2f6c8da1d56342674dda"></a><!-- doxytag: member="CompliantDOF::updateVal" ref="95fd530d923a2f6c8da1d56342674dda" args="(double q1)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_compliant_d_o_f.html#95fd530d923a2f6c8da1d56342674dda">updateVal</a> (double q1)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Nothing to keep track of here. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_compliant_d_o_f.html#b872b9687013b9d39e79f49dcbfde3f0">updateFromJointValues</a> (const double *jointVals=NULL)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This can not always work, as states can be ambigous.  <a href="#b872b9687013b9d39e79f49dcbfde3f0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_compliant_d_o_f.html#02edf320580f33172ed3b5083fbf721a">accumulateMove</a> (double q1, double *jointVals, int *stoppedJoints)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Distal joints are unaffected by proximal joints.  <a href="#02edf320580f33172ed3b5083fbf721a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_compliant_d_o_f.html#394c92249747dedbea48aa2f91b0da0e">computeStaticJointTorques</a> (double *jointTorques, double dofForce=-1)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Takes joint springs and coupling ratios into account.  <a href="#394c92249747dedbea48aa2f91b0da0e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="8aed2d5fbb8641beeb79e288fb95af08"></a><!-- doxytag: member="CompliantDOF::reset" ref="8aed2d5fbb8641beeb79e288fb95af08" args="()" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_compliant_d_o_f.html#8aed2d5fbb8641beeb79e288fb95af08">reset</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This <a class="el" href="class_d_o_f.html" title="A single degree of freedom in a robot.">DOF</a> is stateless, nothing to reset. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="52a604a05d3928d87f2b9a66a651d3b8"></a><!-- doxytag: member="CompliantDOF::getNumCouplingConstraints" ref="52a604a05d3928d87f2b9a66a651d3b8" args="()" -->
virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_compliant_d_o_f.html#52a604a05d3928d87f2b9a66a651d3b8">getNumCouplingConstraints</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">No dynamic coupling constraints, all joint forces are set explicitly. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="64049d40c17e0b98570abe6dc6c2b8c3"></a><!-- doxytag: member="CompliantDOF::buildDynamicCouplingConstraints" ref="64049d40c17e0b98570abe6dc6c2b8c3" args="(std::map&lt; Body *, int &gt; &amp;, int, double *, double *, int &amp;)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_compliant_d_o_f.html#64049d40c17e0b98570abe6dc6c2b8c3">buildDynamicCouplingConstraints</a> (std::map&lt; <a class="el" href="class_body.html">Body</a> *, int &gt; &amp;, int, double *, double *, int &amp;)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">No dynamic coupling constraints, all joint forces are set explicitly. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_compliant_d_o_f.html#4fc772b7f9f708ee454f0db0aa7e2ebf">getNumLimitConstraints</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">One constraint for each joint that exceeds it range.  <a href="#4fc772b7f9f708ee454f0db0aa7e2ebf"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_compliant_d_o_f.html#3cfb912a60bf9269fe292b62c9524f46">buildDynamicLimitConstraints</a> (std::map&lt; <a class="el" href="class_body.html">Body</a> *, int &gt; &amp;islandIndices, int numBodies, double *H, double *g, int &amp;hcn)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Computes one constraint for each joint that exceeds it range.  <a href="#3cfb912a60bf9269fe292b62c9524f46"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="30c529a374f36f0813b4238032b7e500"></a><!-- doxytag: member="CompliantDOF::setForce" ref="30c529a374f36f0813b4238032b7e500" args="(double f)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_compliant_d_o_f.html#30c529a374f36f0813b4238032b7e500">setForce</a> (double f)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Explicitly sets force to all joints in the <a class="el" href="class_d_o_f.html" title="A single degree of freedom in a robot.">DOF</a>. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_compliant_d_o_f.html#0376830e2b8215b46b8f59e5b698d9b1">PDPositionController</a> (double timeStep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A simple stub for now, always applying max force.  <a href="#0376830e2b8215b46b8f59e5b698d9b1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_compliant_d_o_f.html#64a78b61c1848f7a6165c4975700db50">dynamicsProgress</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns true if this <a class="el" href="class_d_o_f.html" title="A single degree of freedom in a robot.">DOF</a> is still progrssing towards its dynamic target.  <a href="#64a78b61c1848f7a6165c4975700db50"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
The compliant <a class="el" href="class_d_o_f.html" title="A single degree of freedom in a robot.">DOF</a> is modeled after the Harvard <a class="el" href="class_hand.html" title="A hand is a special type of robot that can have a grasp associated with it.">Hand</a>. It assumes compliant joints coupled through tendon actuation. As in the Breakaway <a class="el" href="class_d_o_f.html" title="A single degree of freedom in a robot.">DOF</a>, if a proximal joint is stopped, distal joints continue to close. However, there is no breakaway mechanism, to joints that are stopped due to contact are always connected to the <a class="el" href="class_d_o_f.html" title="A single degree of freedom in a robot.">DOF</a>. <hr><h2>Member Function Documentation</h2>
<a class="anchor" name="02edf320580f33172ed3b5083fbf721a"></a><!-- doxytag: member="CompliantDOF::accumulateMove" ref="02edf320580f33172ed3b5083fbf721a" args="(double q1, double *jointVals, int *stoppedJoints)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CompliantDOF::accumulateMove           </td>
          <td>(</td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>q1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>jointVals</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>stoppedJoints</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Distal joints are unaffected by proximal joints. 
<p>
Proximal joints do not affect distal joints, in any direction of movement. 
<p>Implements <a class="el" href="class_d_o_f.html#d77f1d928f9bc08fac53dacefeffe443">DOF</a>.</p>

</div>
</div><p>
<a class="anchor" name="3cfb912a60bf9269fe292b62c9524f46"></a><!-- doxytag: member="CompliantDOF::buildDynamicLimitConstraints" ref="3cfb912a60bf9269fe292b62c9524f46" args="(std::map&lt; Body *, int &gt; &amp;islandIndices, int numBodies, double *H, double *g, int &amp;hcn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CompliantDOF::buildDynamicLimitConstraints           </td>
          <td>(</td>
          <td class="paramtype">std::map&lt; <a class="el" href="class_body.html">Body</a> *, int &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>islandIndices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numBodies</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>H</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>g</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&nbsp;</td>
          <td class="paramname"> <em>hcn</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Computes one constraint for each joint that exceeds it range. 
<p>
One constraint for each joint that has exceeded its legal range. For now this duplicates code from the regular <a class="el" href="class_d_o_f.html" title="A single degree of freedom in a robot.">DOF</a>, so everything should probably move someplace else. 
<p>Implements <a class="el" href="class_d_o_f.html#41b892c6e7288a3e205b28e2bb6e325e">DOF</a>.</p>

</div>
</div><p>
<a class="anchor" name="394c92249747dedbea48aa2f91b0da0e"></a><!-- doxytag: member="CompliantDOF::computeStaticJointTorques" ref="394c92249747dedbea48aa2f91b0da0e" args="(double *jointTorques, double dofForce=&#45;1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CompliantDOF::computeStaticJointTorques           </td>
          <td>(</td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>jointTorques</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>dofForce</em> = <code>-1</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Takes joint springs and coupling ratios into account. 
<p>
We use a linear spring model w. stiffness k for any joint. First we apply the spring force to each joint. Then we say that the dof force must be enough to balance the largest spring force we have found. Therefore, we then apply that dof force to all joints. 
<p>Implements <a class="el" href="class_d_o_f.html#cd3d62c7e7588b969d9a9e567e944445">DOF</a>.</p>

</div>
</div><p>
<a class="anchor" name="64a78b61c1848f7a6165c4975700db50"></a><!-- doxytag: member="CompliantDOF::dynamicsProgress" ref="64a78b61c1848f7a6165c4975700db50" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CompliantDOF::dynamicsProgress           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns true if this <a class="el" href="class_d_o_f.html" title="A single degree of freedom in a robot.">DOF</a> is still progrssing towards its dynamic target. 
<p>
Simply looks at the change in <a class="el" href="classposition.html" title="A 3-dimensional position and methods to operate on them.">position</a> of this dof. Since it is hard-coded to always apply the max force, no motion always means no progress. 
<p>Reimplemented from <a class="el" href="class_d_o_f.html#b655d798bd0e2abb3f67042a310d7354">DOF</a>.</p>

</div>
</div><p>
<a class="anchor" name="4fc772b7f9f708ee454f0db0aa7e2ebf"></a><!-- doxytag: member="CompliantDOF::getNumLimitConstraints" ref="4fc772b7f9f708ee454f0db0aa7e2ebf" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int CompliantDOF::getNumLimitConstraints           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
One constraint for each joint that exceeds it range. 
<p>
We will use one limit constraint for each joint that exceeds is very close to or outside its legal range. 
<p>Implements <a class="el" href="class_d_o_f.html#2608bec77d257b32d9945e7aa51540c3">DOF</a>.</p>

</div>
</div><p>
<a class="anchor" name="0376830e2b8215b46b8f59e5b698d9b1"></a><!-- doxytag: member="CompliantDOF::PDPositionController" ref="0376830e2b8215b46b8f59e5b698d9b1" args="(double timeStep)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double CompliantDOF::PDPositionController           </td>
          <td>(</td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>timeStep</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A simple stub for now, always applying max force. 
<p>
A stub for now. Always applies max force no matter what. For now, the simulation of the Harvard <a class="el" href="class_hand.html" title="A hand is a special type of robot that can have a grasp associated with it.">Hand</a> behaves reasonably like this, but in the future this should be fixed. 
<p>Reimplemented from <a class="el" href="class_d_o_f.html#6c9027e01b5c344d02f06a942cdd61f7">DOF</a>.</p>

</div>
</div><p>
<a class="anchor" name="b872b9687013b9d39e79f49dcbfde3f0"></a><!-- doxytag: member="CompliantDOF::updateFromJointValues" ref="b872b9687013b9d39e79f49dcbfde3f0" args="(const double *jointVals=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CompliantDOF::updateFromJointValues           </td>
          <td>(</td>
          <td class="paramtype">const double *&nbsp;</td>
          <td class="paramname"> <em>jointVals</em> = <code>NULL</code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This can not always work, as states can be ambigous. 
<p>
Make the assumption that the joint that's most flexed gives the value of the <a class="el" href="class_d_o_f.html" title="A single degree of freedom in a robot.">DOF</a>. This doesn't always work. In general, due to the nature of this <a class="el" href="class_d_o_f.html" title="A single degree of freedom in a robot.">DOF</a> and the fact that it is implemented as stateless, link positions can be ambiguous, so this function only provides a best effort but no guarantee. 
<p>Implements <a class="el" href="class_d_o_f.html#eac893c4b1e5f0994eb1407c811972fa">DOF</a>.</p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>C:/Documents and Settings/cmatei/My Documents/GraspitVersions/Graspit-2-1/include/<a class="el" href="dof_8h-source.html">dof.h</a><li>C:/Documents and Settings/cmatei/My Documents/GraspitVersions/Graspit-2-1/src/dof.cpp</ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Jul 24 16:39:10 2009 for Graspit by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
