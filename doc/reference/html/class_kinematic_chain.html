<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Graspit: KinematicChain Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>KinematicChain Class Reference</h1><!-- doxytag: class="KinematicChain" -->A serial chain of links connected by joints.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="kinematic_chain_8h-source.html">kinematicChain.h</a>&gt;</code>
<p>

<p>
<a href="class_kinematic_chain-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#dbdef58895def44e42f95cbe969c2c78">KinematicChain</a> (<a class="el" href="class_robot.html">Robot</a> *r, int chainNumber, int jointNum)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#6618199b0332faa968ee7ccbbeb30c59">~KinematicChain</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_matrix.html">Matrix</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#97f338eb596094cf3ce6ace09cae16f5">linkJacobian</a> (bool worldCoords) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Builds the complete link jacobian wrt to dynamic joints of this chain.  <a href="#97f338eb596094cf3ce6ace09cae16f5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_matrix.html">Matrix</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#4ffd998c7369b92f9b91ca617041ca2e">activeLinkJacobian</a> (bool worldCoords)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Builds the link jacobian but removes the rows corresponding to links that have no contacts.  <a href="#4ffd998c7369b92f9b91ca617041ca2e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_matrix.html">Matrix</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#3aa9ff25f1309cafb057dccd2f0d29c7">actuatedJacobian</a> (const <a class="el" href="class_matrix.html">Matrix</a> &amp;fullColumnJ) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns a matrix that only contains the columns of the Jacobian that correspond to actuated joint dofs.  <a href="#3aa9ff25f1309cafb057dccd2f0d29c7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_matrix.html">Matrix</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#a61d4238ddc5d863ccf7f596b04663ae">jointTorquesVector</a> (<a class="el" href="class_matrix.html">Matrix</a> fullRobotTorques)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#0de304b77325032421972eb14ec013fa">getNumContacts</a> (<a class="el" href="class_body.html">Body</a> *body)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the number of contacts between links of this chain and a given object.  <a href="#0de304b77325032421972eb14ec013fa"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::list&lt; <a class="el" href="class_contact.html">Contact</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#b76a012ff95cb2d05d5d6659bf41d05e">getContacts</a> (<a class="el" href="class_body.html">Body</a> *body)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns all the contacts between links of this chain and a given object.  <a href="#b76a012ff95cb2d05d5d6659bf41d05e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#32d6c82c82ed281a0eaf353994d6c6f7">initChainFromXml</a> (const TiXmlElement *root, QString &amp;linkDir)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#d5ae3407283e84c8c794939d364946e1">cloneFrom</a> (const <a class="el" href="class_kinematic_chain.html">KinematicChain</a> *original)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#531e07166890a948e779fb52c5aa872d">setJointValues</a> (const double *jointVals)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets joint values (without updating poses) based on a vector with values for all robot joints.  <a href="#531e07166890a948e779fb52c5aa872d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#9aa8319c3544124971efee988c4a7c58">getJointValues</a> (double *jointVals) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets joint values in a vector with values for all robot joints.  <a href="#9aa8319c3544124971efee988c4a7c58"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#b914e6cb865f2c58c92683c19e6cec65">fwdKinematics</a> (const double *jointVals, std::vector&lt; <a class="el" href="classtransf.html">transf</a> &gt; &amp;newLinkTranVec) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Compute the link transforms that correspond to a given set of joint values.  <a href="#b914e6cb865f2c58c92683c19e6cec65"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#debaf94172506946163e5c9a3a73807d">getJointLocations</a> (const double *jointVals, std::vector&lt; <a class="el" href="classtransf.html">transf</a> &gt; &amp;jointTranVec) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Compute the locations and orientations of all the joints in this chain for some set of joint values.  <a href="#debaf94172506946163e5c9a3a73807d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#080f4deec5f4aff1c4c3d5e51833c202">infinitesimalMotion</a> (const double *jointVals, std::vector&lt; <a class="el" href="classtransf.html">transf</a> &gt; &amp;newLinkTranVec) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Compute the link transforms for an infinitesimal joint motion in specified direction.  <a href="#080f4deec5f4aff1c4c3d5e51833c202"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#da3efab0e07cb21b08b97f8b228b763e">updateLinkPoses</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the transforms of the links to match the current joint values.  <a href="#da3efab0e07cb21b08b97f8b228b763e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#8d0bc88e0194d24c91fbaebc124dda89">filterCollisionReport</a> (<a class="el" href="collision_structures_8h.html#56044fe7fffe7044c92ff5bfae3d56b6">CollisionReport</a> &amp;colReport)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Keep in the report only those collisions which involve at least a link from this chain.  <a href="#8d0bc88e0194d24c91fbaebc124dda89"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="2994e94f081d3d8ffbaf1ba805d3e711"></a><!-- doxytag: member="KinematicChain::getFirstJointNum" ref="2994e94f081d3d8ffbaf1ba805d3e711" args="()" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#2994e94f081d3d8ffbaf1ba805d3e711">getFirstJointNum</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the number of the first joint in this chain in the robot numbering scheme. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="7a76879a0df5769bbaaa1bba716a0d53"></a><!-- doxytag: member="KinematicChain::getNum" ref="7a76879a0df5769bbaaa1bba716a0d53" args="() const " -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#7a76879a0df5769bbaaa1bba716a0d53">getNum</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the index of this chain in the robot's list of chains. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#6918be6a927c030e35978e4c7ea30857">attachRobot</a> (<a class="el" href="class_robot.html">Robot</a> *r, const <a class="el" href="classtransf.html">transf</a> &amp;offsetTr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#fe45b84698018f03ee904d144c88d222">detachRobot</a> (<a class="el" href="class_robot.html">Robot</a> *r)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="class_robot.html">Robot</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#87a437d986da61d7bb58b2bca959b189">getOwner</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#ba92fabd3307ff88cf5fb9f39841c1a3">getNumJoints</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#104855d4aa257e39637d83740cb99453">getNumLinks</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_joint.html">Joint</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#6f053cf6ccf75a5db832a348d1a9cfd1">getJoint</a> (int i) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4768e567536c845a46d8964e20d67317"></a><!-- doxytag: member="KinematicChain::getJoints" ref="4768e567536c845a46d8964e20d67317" args="()" -->
std::list&lt; <a class="el" href="class_joint.html">Joint</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#4768e567536c845a46d8964e20d67317">getJoints</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns a list of all joints in this chain. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_link.html">Link</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#c6c2563b63ca06b1c676350c2eaa2740">getLink</a> (int i) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#dafce38d495c739f2cb533ca3267c5ad">getLastJoint</a> (int i) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">SoSeparator *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#c74e7fb61759740c2fe892654f9e42b9">getIVRoot</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">SoTransform *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#253d900537ca8949dbc6ab439ef32a3c">getIVTran</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classtransf.html">transf</a> const &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#cb093ca837edfbcfe3bb57e1563b0a58">getTran</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#3f8a481c110331a227cc03fd8d72eb04">jointsHaveMoved</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#896f7c9b98b86098b091ddb04ad750c8">getNumAttachedRobots</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_robot.html">Robot</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#f1418f89c2d573c1b0d88f7870a3d76f">getAttachedRobot</a> (int i) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classtransf.html">transf</a> const &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kinematic_chain.html#b7143fa62eec6f4f5781e4309b118357">getAttachedRobotOffset</a> (int i) const </td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
A serial chain of links connected by joints. 
<p>
A kinematicChain is a serial chain of links connected by joints. In a robot hand each finger is a kinematic chain. A chain can also have any number of robots attached to its end. For example, a robot hand can be connected to the end of an arm's kinematic chain. Each chain has a base transform that relates the start of the chain to the base frame of the robot. Given values for the joint positions, this class solves the forward kinematics for each link in the chain.<p>
In general, the only way that robot links should ever be moved is through the kinematic chains: the robot asks the dof's for joint values, tells the chains to set those values then tells the chains to update link poses. <hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="dbdef58895def44e42f95cbe969c2c78"></a><!-- doxytag: member="KinematicChain::KinematicChain" ref="dbdef58895def44e42f95cbe969c2c78" args="(Robot *r, int chainNumber, int jointNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">KinematicChain::KinematicChain           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_robot.html">Robot</a> *&nbsp;</td>
          <td class="paramname"> <em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>chainNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>jointNum</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The constructor is called from a robot's load method, and requires a a pointer to the robot owning this chain, and the index of which chain this is within the robot. 
</div>
</div><p>
<a class="anchor" name="6618199b0332faa968ee7ccbbeb30c59"></a><!-- doxytag: member="KinematicChain::~KinematicChain" ref="6618199b0332faa968ee7ccbbeb30c59" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">KinematicChain::~KinematicChain           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The destructor deletes each of the joints in this chain, and asks the world to delete each of the links in the chain. It also detaches any connected robots. 
</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="4ffd998c7369b92f9b91ca617041ca2e"></a><!-- doxytag: member="KinematicChain::activeLinkJacobian" ref="4ffd998c7369b92f9b91ca617041ca2e" args="(bool worldCoords)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_matrix.html">Matrix</a> KinematicChain::activeLinkJacobian           </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>worldCoords</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Builds the link jacobian but removes the rows corresponding to links that have no contacts. 
<p>
The active link jacobian will build the regular link Jacobian, then only keep the rows that correspond to links that have at least one contact (as links with no contacts can not balance actuation forces applied to them). 
</div>
</div><p>
<a class="anchor" name="3aa9ff25f1309cafb057dccd2f0d29c7"></a><!-- doxytag: member="KinematicChain::actuatedJacobian" ref="3aa9ff25f1309cafb057dccd2f0d29c7" args="(const Matrix &amp;fullColumnJ) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_matrix.html">Matrix</a> KinematicChain::actuatedJacobian           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_matrix.html">Matrix</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>fullColumnJ</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns a matrix that only contains the columns of the Jacobian that correspond to actuated joint dofs. 
<p>
This function takes a Jacobian with all columns (6dof per joint and returns a version that has only those columns that correspond to the actuated dofs in each joint (e.g. the z axis for revolute joints) 
</div>
</div><p>
<a class="anchor" name="6918be6a927c030e35978e4c7ea30857"></a><!-- doxytag: member="KinematicChain::attachRobot" ref="6918be6a927c030e35978e4c7ea30857" args="(Robot *r, const transf &amp;offsetTr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KinematicChain::attachRobot           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_robot.html">Robot</a> *&nbsp;</td>
          <td class="paramname"> <em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtransf.html">transf</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>offsetTr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Given a pointer to another robot and an offset transform of the base frame of the robot with respect to the end transform of the link of this chain. 
</div>
</div><p>
<a class="anchor" name="d5ae3407283e84c8c794939d364946e1"></a><!-- doxytag: member="KinematicChain::cloneFrom" ref="d5ae3407283e84c8c794939d364946e1" args="(const KinematicChain *original)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KinematicChain::cloneFrom           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_kinematic_chain.html">KinematicChain</a> *&nbsp;</td>
          <td class="paramname"> <em>original</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates an indentical copy of another chain, sharing things such as geometry<p>
Copies this chain structure from an existing chain. All joints are set to independent copies of the original chain. All links are created as clones of the links from the original chain. 
</div>
</div><p>
<a class="anchor" name="fe45b84698018f03ee904d144c88d222"></a><!-- doxytag: member="KinematicChain::detachRobot" ref="fe45b84698018f03ee904d144c88d222" args="(Robot *r)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KinematicChain::detachRobot           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_robot.html">Robot</a> *&nbsp;</td>
          <td class="paramname"> <em>r</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This separates the robot pointed to by r from this kinematic chain, allowing them to move independently. 
</div>
</div><p>
<a class="anchor" name="8d0bc88e0194d24c91fbaebc124dda89"></a><!-- doxytag: member="KinematicChain::filterCollisionReport" ref="8d0bc88e0194d24c91fbaebc124dda89" args="(CollisionReport &amp;colReport)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KinematicChain::filterCollisionReport           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="collision_structures_8h.html#56044fe7fffe7044c92ff5bfae3d56b6">CollisionReport</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>colReport</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Keep in the report only those collisions which involve at least a link from this chain. 
<p>
Filters a collision report and keeps only collisions of a particular chain For now it also throws out collisions between robot parts, as those are giving us problems. 
</div>
</div><p>
<a class="anchor" name="b914e6cb865f2c58c92683c19e6cec65"></a><!-- doxytag: member="KinematicChain::fwdKinematics" ref="b914e6cb865f2c58c92683c19e6cec65" args="(const double *jointVals, std::vector&lt; transf &gt; &amp;newLinkTranVec) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KinematicChain::fwdKinematics           </td>
          <td>(</td>
          <td class="paramtype">const double *&nbsp;</td>
          <td class="paramname"> <em>jointVals</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="classtransf.html">transf</a> &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>newLinkTranVec</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Compute the link transforms that correspond to a given set of joint values. 
<p>
Given a array of joint values for each joint in the chain, this method will compute the transforms for each link in the chain with respect to world <a class="el" href="classcoordinates.html" title="This is the base class for various coordinate representations.">coordinates</a>. It does not affect the chain itself.<p>
The array of joint values is assumed to contain all the joints in the robot, numbered as in the robot's numbering scheme. Alternatively, you can pass NULL instead, in which case the current joint values are used. 
</div>
</div><p>
<a class="anchor" name="f1418f89c2d573c1b0d88f7870a3d76f"></a><!-- doxytag: member="KinematicChain::getAttachedRobot" ref="f1418f89c2d573c1b0d88f7870a3d76f" args="(int i) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_robot.html">Robot</a>* KinematicChain::getAttachedRobot           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>i</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the i-th robot attached to the end of the chain 
</div>
</div><p>
<a class="anchor" name="b7143fa62eec6f4f5781e4309b118357"></a><!-- doxytag: member="KinematicChain::getAttachedRobotOffset" ref="b7143fa62eec6f4f5781e4309b118357" args="(int i) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtransf.html">transf</a> const&amp; KinematicChain::getAttachedRobotOffset           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>i</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the offset transform between the end of the chain and the base of the i-th attached robot 
</div>
</div><p>
<a class="anchor" name="b76a012ff95cb2d05d5d6659bf41d05e"></a><!-- doxytag: member="KinematicChain::getContacts" ref="b76a012ff95cb2d05d5d6659bf41d05e" args="(Body *body)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt; <a class="el" href="class_contact.html">Contact</a> * &gt; KinematicChain::getContacts           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_body.html">Body</a> *&nbsp;</td>
          <td class="paramname"> <em>body</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns all the contacts between links of this chain and a given object. 
<p>
Returns a list of the contacts between the links of this chain and the object <em>body</em>. If <em>body</em> == NULL, returns all the contacts, regardless of what object they are against. Todo: what about self-colision? 
</div>
</div><p>
<a class="anchor" name="c74e7fb61759740c2fe892654f9e42b9"></a><!-- doxytag: member="KinematicChain::getIVRoot" ref="c74e7fb61759740c2fe892654f9e42b9" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SoSeparator* KinematicChain::getIVRoot           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns a pointer to the root of the chain's Inventor scene graph 
</div>
</div><p>
<a class="anchor" name="253d900537ca8949dbc6ab439ef32a3c"></a><!-- doxytag: member="KinematicChain::getIVTran" ref="253d900537ca8949dbc6ab439ef32a3c" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SoTransform* KinematicChain::getIVTran           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns a pointer to the Inventor transform corresponding to the base transform of the chain 
</div>
</div><p>
<a class="anchor" name="6f053cf6ccf75a5db832a348d1a9cfd1"></a><!-- doxytag: member="KinematicChain::getJoint" ref="6f053cf6ccf75a5db832a348d1a9cfd1" args="(int i) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_joint.html">Joint</a>* KinematicChain::getJoint           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>i</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns a pointer to the i-th joint in the chain 
</div>
</div><p>
<a class="anchor" name="debaf94172506946163e5c9a3a73807d"></a><!-- doxytag: member="KinematicChain::getJointLocations" ref="debaf94172506946163e5c9a3a73807d" args="(const double *jointVals, std::vector&lt; transf &gt; &amp;jointTranVec) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KinematicChain::getJointLocations           </td>
          <td>(</td>
          <td class="paramtype">const double *&nbsp;</td>
          <td class="paramname"> <em>jointVals</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="classtransf.html">transf</a> &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>jointTranVec</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Compute the locations and orientations of all the joints in this chain for some set of joint values. 
<p>
Given an array of joint values for each joint in the chain, it will compute the location and orientations of all the joints in the chain, w.r.t. world <a class="el" href="classcoordinates.html" title="This is the base class for various coordinate representations.">coordinates</a>. This is somewhat similar to fwd kinematics, but instead of computing link transforms it computes joint transforms. This is different for two reasons. First, a joint's coordinate system is the chained transform before* that joint, not after the joint (as it would be for a link that comes after the joint). Also, we can have multiple joints between two links.<p>
Also remember two GraspIt conventions: for any joint, the joint axis (for rotation or translation) is the z axis of the joint transform returned here. Also, the origin of a link is the same as the transform *after* the last joint that comes before it.<p>
The array of joint values is assumed to contain all the joints in the robot, numbered as in the robot's numbering scheme. Alternatively, you can pass NULL instead, in which case the current joint values are used. 
</div>
</div><p>
<a class="anchor" name="9aa8319c3544124971efee988c4a7c58"></a><!-- doxytag: member="KinematicChain::getJointValues" ref="9aa8319c3544124971efee988c4a7c58" args="(double *jointVals) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KinematicChain::getJointValues           </td>
          <td>(</td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>jointVals</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gets joint values in a vector with values for all robot joints. 
<p>
Reads in the current values of the joints in this chain, and uses them to populate the vector <em>jointVals</em>. This vector is ordered to contain all the joints of the robot (not only of this chain) and joints are indexed by their number in the robot structure, not in this chain's struture. 
</div>
</div><p>
<a class="anchor" name="dafce38d495c739f2cb533ca3267c5ad"></a><!-- doxytag: member="KinematicChain::getLastJoint" ref="dafce38d495c739f2cb533ca3267c5ad" args="(int i) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int KinematicChain::getLastJoint           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>i</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the index of the last joint in the chain that affects the pose of link i 
</div>
</div><p>
<a class="anchor" name="c6c2563b63ca06b1c676350c2eaa2740"></a><!-- doxytag: member="KinematicChain::getLink" ref="c6c2563b63ca06b1c676350c2eaa2740" args="(int i) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_link.html">Link</a>* KinematicChain::getLink           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>i</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns a pointer to the i-th link in the chain 
</div>
</div><p>
<a class="anchor" name="896f7c9b98b86098b091ddb04ad750c8"></a><!-- doxytag: member="KinematicChain::getNumAttachedRobots" ref="896f7c9b98b86098b091ddb04ad750c8" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int KinematicChain::getNumAttachedRobots           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the number of robots attached to the end of the chain 
</div>
</div><p>
<a class="anchor" name="0de304b77325032421972eb14ec013fa"></a><!-- doxytag: member="KinematicChain::getNumContacts" ref="0de304b77325032421972eb14ec013fa" args="(Body *body)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int KinematicChain::getNumContacts           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_body.html">Body</a> *&nbsp;</td>
          <td class="paramname"> <em>body</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the number of contacts between links of this chain and a given object. 
<p>
Returns the number of contacts between the links of this chain and the object <em>body</em>. If <em>body</em> == NULL, returns the total number of contacts, regardless of what object they are against. Todo: what about self-colision? 
</div>
</div><p>
<a class="anchor" name="ba92fabd3307ff88cf5fb9f39841c1a3"></a><!-- doxytag: member="KinematicChain::getNumJoints" ref="ba92fabd3307ff88cf5fb9f39841c1a3" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int KinematicChain::getNumJoints           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the number of joints in the chain 
</div>
</div><p>
<a class="anchor" name="104855d4aa257e39637d83740cb99453"></a><!-- doxytag: member="KinematicChain::getNumLinks" ref="104855d4aa257e39637d83740cb99453" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int KinematicChain::getNumLinks           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the number of links in the chain 
</div>
</div><p>
<a class="anchor" name="87a437d986da61d7bb58b2bca959b189"></a><!-- doxytag: member="KinematicChain::getOwner" ref="87a437d986da61d7bb58b2bca959b189" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_robot.html">Robot</a>* KinematicChain::getOwner           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the robot that owns this chain 
</div>
</div><p>
<a class="anchor" name="cb093ca837edfbcfe3bb57e1563b0a58"></a><!-- doxytag: member="KinematicChain::getTran" ref="cb093ca837edfbcfe3bb57e1563b0a58" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtransf.html">transf</a> const&amp; KinematicChain::getTran           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the base transform of the chain relative to the robot base 
</div>
</div><p>
<a class="anchor" name="080f4deec5f4aff1c4c3d5e51833c202"></a><!-- doxytag: member="KinematicChain::infinitesimalMotion" ref="080f4deec5f4aff1c4c3d5e51833c202" args="(const double *jointVals, std::vector&lt; transf &gt; &amp;newLinkTranVec) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KinematicChain::infinitesimalMotion           </td>
          <td>(</td>
          <td class="paramtype">const double *&nbsp;</td>
          <td class="paramname"> <em>jointVals</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="classtransf.html">transf</a> &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>newLinkTranVec</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Compute the link transforms for an infinitesimal joint motion in specified direction. 
<p>
Given an array of desired joint values, this computed an infinitesimal motion of each link as motion *from the current values* towards the desired values is started. Used mainly to see if any contacts prevent this motion. 
</div>
</div><p>
<a class="anchor" name="32d6c82c82ed281a0eaf353994d6c6f7"></a><!-- doxytag: member="KinematicChain::initChainFromXml" ref="32d6c82c82ed281a0eaf353994d6c6f7" args="(const TiXmlElement *root, QString &amp;linkDir)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int KinematicChain::initChainFromXml           </td>
          <td>(</td>
          <td class="paramtype">const TiXmlElement *&nbsp;</td>
          <td class="paramname"> <em>root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QString &amp;&nbsp;</td>
          <td class="paramname"> <em>linkDir</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Loads the chain information from XML, expected in the standard format of GraspIt! .xml robot files<p>
Sets up the chain given a XML DOM from a currently open robot configuration file. It reads the number of joints and the number of links and allocates space for those vectors, then it reads in the base transform of the chain. Next, it reads a node for each joint and creates a prismatic or revolute joint which is initialized with the kinematic data in that node. <em>linkDir</em> should be the path to the directory where the link body files are kept (usually rootPath/iv). 
</div>
</div><p>
<a class="anchor" name="3f8a481c110331a227cc03fd8d72eb04"></a><!-- doxytag: member="KinematicChain::jointsHaveMoved" ref="3f8a481c110331a227cc03fd8d72eb04" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool KinematicChain::jointsHaveMoved           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the value of the flag indicating whether the joints have been moved since the last time the link poses have been updated 
</div>
</div><p>
<a class="anchor" name="a61d4238ddc5d863ccf7f596b04663ae"></a><!-- doxytag: member="KinematicChain::jointTorquesVector" ref="a61d4238ddc5d863ccf7f596b04663ae" args="(Matrix fullRobotTorques)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_matrix.html">Matrix</a> KinematicChain::jointTorquesVector           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_matrix.html">Matrix</a>&nbsp;</td>
          <td class="paramname"> <em>fullRobotTorques</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Given a matrix with all the joint torques of the robot, numbered as in the the robot scheme, this extracts a vector of chain joint torques, in the order in which they appear in this chain 
</div>
</div><p>
<a class="anchor" name="97f338eb596094cf3ce6ace09cae16f5"></a><!-- doxytag: member="KinematicChain::linkJacobian" ref="97f338eb596094cf3ce6ace09cae16f5" args="(bool worldCoords) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_matrix.html">Matrix</a> KinematicChain::linkJacobian           </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>worldCoords</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Builds the complete link jacobian wrt to dynamic joints of this chain. 
<p>
The link jacobian relates joint angle changes to link movement. Its transpose relates forces applied to link to forces applied to joints. If <em>worldCoords</em> is false, the jacobian is computed in each link's coordinate system. 
</div>
</div><p>
<a class="anchor" name="531e07166890a948e779fb52c5aa872d"></a><!-- doxytag: member="KinematicChain::setJointValues" ref="531e07166890a948e779fb52c5aa872d" args="(const double *jointVals)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KinematicChain::setJointValues           </td>
          <td>(</td>
          <td class="paramtype">const double *&nbsp;</td>
          <td class="paramname"> <em>jointVals</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sets joint values (without updating poses) based on a vector with values for all robot joints. 
<p>
Sets the current joint values from the vector <em>jointVals</em>. This vector is ordered to contain all the joints of the robot (not only of this chain) and joints are indexed by their number in the robot structure, not in this chain's struture. 
</div>
</div><p>
<a class="anchor" name="da3efab0e07cb21b08b97f8b228b763e"></a><!-- doxytag: member="KinematicChain::updateLinkPoses" ref="da3efab0e07cb21b08b97f8b228b763e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KinematicChain::updateLinkPoses           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the transforms of the links to match the current joint values. 
<p>
Computes forward kinematics for the current joint values, then sets the link transforms accordingly. This is the only way that robot links should ever be moved (the robot asks the dof' for joint values, tells the chains to set those values then tells the chains to update link poses). 
</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>C:/Documents and Settings/cmatei/My Documents/GraspitVersions/Graspit-2-1/include/<a class="el" href="kinematic_chain_8h-source.html">kinematicChain.h</a><li>C:/Documents and Settings/cmatei/My Documents/GraspitVersions/Graspit-2-1/src/kinematicChain.cpp</ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Jul 24 16:39:12 2009 for Graspit by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
