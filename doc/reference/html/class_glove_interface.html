<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Graspit: GloveInterface Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>GloveInterface Class Reference</h1><!-- doxytag: class="GloveInterface" -->Interface between a GraspIt robot and the CyberGlove.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="glove_interface_8h-source.html">gloveInterface.h</a>&gt;</code>
<p>

<p>
<a href="class_glove_interface-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_glove_interface.html#4e73b7963b4f58c927cdca2c04676a3a">calibrationTypes</a> { <br>
&nbsp;&nbsp;<b>FIST</b>, 
<b>SIMPLE_THUMB</b>, 
<b>COMPLEX_THUMB</b>, 
<b>ABD_ADD</b>, 
<br>
&nbsp;&nbsp;<b>MEAN_POSE</b>
<br>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The types of calibrations available with this interface.  <a href="class_glove_interface.html#4e73b7963b4f58c927cdca2c04676a3a">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="9cc8e003a852e0a1be78dc28b26fab5b"></a><!-- doxytag: member="GloveInterface::GloveInterface" ref="9cc8e003a852e0a1be78dc28b26fab5b" args="(Robot *robot)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>GloveInterface</b> (<a class="el" href="class_robot.html">Robot</a> *robot)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="1d417d303596da8a18a214fa6dcf7f13"></a><!-- doxytag: member="GloveInterface::getRobot" ref="1d417d303596da8a18a214fa6dcf7f13" args="()" -->
<a class="el" href="class_robot.html">Robot</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><b>getRobot</b> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="2b894d925e2506f3fdea67c0fe34fa24"></a><!-- doxytag: member="GloveInterface::setGlove" ref="2b894d925e2506f3fdea67c0fe34fa24" args="(CyberGlove *glove)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>setGlove</b> (CyberGlove *glove)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_glove_interface.html#8cef91651312f6ae23e79ec6ec674d4b">startGlove</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes the glove, in case we want to use it during the calibration.  <a href="#8cef91651312f6ae23e79ec6ec674d4b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="0c01be8494c80dab616767ad6fdcc3f6"></a><!-- doxytag: member="GloveInterface::instantRead" ref="0c01be8494c80dab616767ad6fdcc3f6" args="()" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_glove_interface.html#0c01be8494c80dab616767ad6fdcc3f6">instantRead</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Asks the raw CyberGlove to refresh its readings from the sensors via the serial port. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a5d4d1aceec539b87afe697f5a1b7387"></a><!-- doxytag: member="GloveInterface::isDOFControlled" ref="a5d4d1aceec539b87afe697f5a1b7387" args="(int d)" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_glove_interface.html#a5d4d1aceec539b87afe697f5a1b7387">isDOFControlled</a> (int d)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tells wether a particular robot <a class="el" href="class_d_o_f.html" title="A single degree of freedom in a robot.">DOF</a> is controlled via the CyberGlove or not. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_glove_interface.html#4667ff687b09a7c4dc5e76cba20f3c80">getDOFValue</a> (int d)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Uses the latest sensor values from the CyberGlove and computes the values of a particular <a class="el" href="class_d_o_f.html" title="A single degree of freedom in a robot.">DOF</a>.  <a href="#4667ff687b09a7c4dc5e76cba20f3c80"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="f7b9eee8225f1e68a257c0a6a3004984"></a><!-- doxytag: member="GloveInterface::getNumSensors" ref="f7b9eee8225f1e68a257c0a6a3004984" args="()" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_glove_interface.html#f7b9eee8225f1e68a257c0a6a3004984">getNumSensors</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the number of raw sensors in the CyberGlove. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_glove_interface.html#4af3a8a47b02223f691b61a463c228b5">setParameters</a> (int s, int d, float sMin, float sMax, float dMin, float dMax)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Computes parametes for linear conversion for a particular combination of raw sensor and dof number.  <a href="#4af3a8a47b02223f691b61a463c228b5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d84bbd6e8a6dbd117fda4ae10b75f06d"></a><!-- doxytag: member="GloveInterface::setParameters" ref="d84bbd6e8a6dbd117fda4ae10b75f06d" args="(int s, int d, float slope, float intercept)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_glove_interface.html#d84bbd6e8a6dbd117fda4ae10b75f06d">setParameters</a> (int s, int d, float slope, float intercept)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the parametes for linear conversion for a particular combination of raw sensor and dof number. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="6e348417083ec648720cb6e7a0902125"></a><!-- doxytag: member="GloveInterface::nextPose" ref="6e348417083ec648720cb6e7a0902125" args="(int direction)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>nextPose</b> (int direction)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="9ea8f1155b12bd8fa1ce8b070b598e0e"></a><!-- doxytag: member="GloveInterface::showCurrentPose" ref="9ea8f1155b12bd8fa1ce8b070b598e0e" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>showCurrentPose</b> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="324e4df2df29527acb9c55754f4595e1"></a><!-- doxytag: member="GloveInterface::recordPoseFromGlove" ref="324e4df2df29527acb9c55754f4595e1" args="(int d=0)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>recordPoseFromGlove</b> (int d=0)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="dc407dc2229be90711ebdfc82a684704"></a><!-- doxytag: member="GloveInterface::poseSet" ref="dc407dc2229be90711ebdfc82a684704" args="()" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>poseSet</b> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="5c22ba351f66d7a11e2362b481d1e843"></a><!-- doxytag: member="GloveInterface::readyToCalibrate" ref="5c22ba351f66d7a11e2362b481d1e843" args="()" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>readyToCalibrate</b> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="26b7d159b87dbccfe4397783d8bffa36"></a><!-- doxytag: member="GloveInterface::calibrated" ref="26b7d159b87dbccfe4397783d8bffa36" args="()" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>calibrated</b> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="31d1972f10ac3335fbb89a84251bb83c"></a><!-- doxytag: member="GloveInterface::saveCalibrationPoses" ref="31d1972f10ac3335fbb89a84251bb83c" args="(const char *filename)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>saveCalibrationPoses</b> (const char *filename)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a1f740b7f56dd3f68b7d754421d1362c"></a><!-- doxytag: member="GloveInterface::loadCalibrationPoses" ref="a1f740b7f56dd3f68b7d754421d1362c" args="(const char *filename)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>loadCalibrationPoses</b> (const char *filename)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="17aa944759e04a0a2d0a6b24a6848405"></a><!-- doxytag: member="GloveInterface::clearPoses" ref="17aa944759e04a0a2d0a6b24a6848405" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>clearPoses</b> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="393c526f1b29d194d6ab291b6a83f8eb"></a><!-- doxytag: member="GloveInterface::getNumPoses" ref="393c526f1b29d194d6ab291b6a83f8eb" args="()" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>getNumPoses</b> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4adce3df0add03df7dd2b1cff9f7fa67"></a><!-- doxytag: member="GloveInterface::loadCalibration" ref="4adce3df0add03df7dd2b1cff9f7fa67" args="(const char *filename)" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>loadCalibration</b> (const char *filename)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="0fec9174f670fc3cd6481e6b506187a3"></a><!-- doxytag: member="GloveInterface::saveCalibration" ref="0fec9174f670fc3cd6481e6b506187a3" args="(const char *filename)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>saveCalibration</b> (const char *filename)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="f80d6171db55047558273f5326f72474"></a><!-- doxytag: member="GloveInterface::initCalibration" ref="f80d6171db55047558273f5326f72474" args="(int type)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>initCalibration</b> (int type)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="96eed992a2f5a0f56c9f8f8549655b02"></a><!-- doxytag: member="GloveInterface::performCalibration" ref="96eed992a2f5a0f56c9f8f8549655b02" args="()" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>performCalibration</b> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="1a0b6ff4552909d26f6976caa31e0320"></a><!-- doxytag: member="GloveInterface::getPoseError" ref="1a0b6ff4552909d26f6976caa31e0320" args="(vec3 *error=NULL, position *thumbLocation=NULL)" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><b>getPoseError</b> (<a class="el" href="classvec3.html">vec3</a> *error=NULL, <a class="el" href="classposition.html">position</a> *thumbLocation=NULL)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c1ef9b7d8bf9af37aa593ed8fdeca7f1"></a><!-- doxytag: member="GloveInterface::getTotalError" ref="c1ef9b7d8bf9af37aa593ed8fdeca7f1" args="()" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><b>getTotalError</b> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="7e76ab8ac5c9576c4662da78656886c8"></a><!-- doxytag: member="GloveInterface::getPoseJacobian" ref="7e76ab8ac5c9576c4662da78656886c8" args="(double *J)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>getPoseJacobian</b> (double *J)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="b6a1a651370b755c718aa8e96286e7c9"></a><!-- doxytag: member="GloveInterface::assembleJMatrix" ref="b6a1a651370b755c718aa8e96286e7c9" args="(double *D, int lda)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>assembleJMatrix</b> (double *D, int lda)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="bcb3c63bc324e889382f01030bd949ec"></a><!-- doxytag: member="GloveInterface::assemblePMatrix" ref="bcb3c63bc324e889382f01030bd949ec" args="(double *P)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>assemblePMatrix</b> (double *P)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="69e70fd910a182f4777f8560bfc9cc03"></a><!-- doxytag: member="GloveInterface::saveRobotPose" ref="69e70fd910a182f4777f8560bfc9cc03" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>saveRobotPose</b> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="efdf9be3e61e322d5bbaa4df6d1c3610"></a><!-- doxytag: member="GloveInterface::revertRobotPose" ref="efdf9be3e61e322d5bbaa4df6d1c3610" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>revertRobotPose</b> ()</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Interface between a GraspIt robot and the CyberGlove. 
<p>
This class interfaces a <a class="el" href="class_robot.html" title="Base class for all robots which are collections of links connected by moveable joints...">Robot</a> with a CyberGlove. The Raw Cyber Glove (in the Sensors library) just talks to the serial port and gets raw glove sensor values between 1 and 255. This interface converts them to joint angle values, can perform calibration to compute the parameters for this conversion, and matches glove sensor numbers to robot <a class="el" href="class_d_o_f.html" title="A single degree of freedom in a robot.">DOF</a> numbers.<p>
This class can also calibrate the CyberGlove (compute the conversion parameters from raw sensor data to dof values). Unfortunately, the calibrations are rather poorly engineered from a software standpoint, they should really have a dedicated interface and inheritance hierarchies.<p>
Up to some degree, all calibrations behave the same way: the user must supply a set of postures that are expected to match a pre-defined set of joint angles. Alternatively, the calibration postures can also be read from a file. After the record step, the calibration step uses these postures to compute the parameters. This step depends on the calibration type. See the enum <em>calibrationType</em> for details.<p>
The most difficult to calibrate is the thumb, where a couple of glove sensors are affected by more then one dof. See the paper by Griffin, Findley, Turner and Cutkosky, "Calibration and Mapping of a Human <a class="el" href="class_hand.html" title="A hand is a special type of robot that can have a grasp associated with it.">Hand</a> for Dexterous Telemanipulation" for some details that have inspired the calibration done here. <hr><h2>Member Enumeration Documentation</h2>
<a class="anchor" name="4e73b7963b4f58c927cdca2c04676a3a"></a><!-- doxytag: member="GloveInterface::calibrationTypes" ref="4e73b7963b4f58c927cdca2c04676a3a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="class_glove_interface.html#4e73b7963b4f58c927cdca2c04676a3a">GloveInterface::calibrationTypes</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The types of calibrations available with this interface. 
<p>
Here is what each does:<p>
FIST: asks the user for only two poses: with the hand flat and with the fist closed. Then, uses the two resulting values for each finger flexion dof to compute the slope and intercept. Does NOT calibrate the thumb at all, or the abduction / adduction dofs.<p>
SIMPLE_THUMB:<p>
COMPLEX_THUMB: asks the user to record as many poses as pssible where the distance between the index finger and the thumb is known. This is done either by touching the index and the thumb, or by holding between them an object of know size. Then attempts to use this data to calibrate the thumb sensors.<p>
ABD_ADD: asks for two poses, at the two ends of abd / add to compute the linear parameters for those dofs.<p>
MEAN_POSE: not really a calibration; the user records as many poses as she want, then this computes the mean of those poses. 
</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="4667ff687b09a7c4dc5e76cba20f3c80"></a><!-- doxytag: member="GloveInterface::getDOFValue" ref="4667ff687b09a7c4dc5e76cba20f3c80" args="(int d)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float GloveInterface::getDOFValue           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>d</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Uses the latest sensor values from the CyberGlove and computes the values of a particular <a class="el" href="class_d_o_f.html" title="A single degree of freedom in a robot.">DOF</a>. 
<p>
Asks the glove for the value of all sensors, then uses them to convert to a dof value. In general, the value of the dof d is obtained by: dof_d = intercepts_d + sum_over_all_sensors_s[slope(s,d) * raw_sensor(s)] 
</div>
</div><p>
<a class="anchor" name="4af3a8a47b02223f691b61a463c228b5"></a><!-- doxytag: member="GloveInterface::setParameters" ref="4af3a8a47b02223f691b61a463c228b5" args="(int s, int d, float sMin, float sMax, float dMin, float dMax)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GloveInterface::setParameters           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>sMin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>sMax</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>dMin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>dMax</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Computes parametes for linear conversion for a particular combination of raw sensor and dof number. 
<p>
Sets the calibration paramteres given a min-max range for a sensor as well as the <a class="el" href="class_d_o_f.html" title="A single degree of freedom in a robot.">DOF</a> it governs. Should soon be private. 
</div>
</div><p>
<a class="anchor" name="8cef91651312f6ae23e79ec6ec674d4b"></a><!-- doxytag: member="GloveInterface::startGlove" ref="8cef91651312f6ae23e79ec6ec674d4b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GloveInterface::startGlove           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initializes the glove, in case we want to use it during the calibration. 
<p>
We can also use pre-recorded poses if we don't want to. 
</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>C:/Documents and Settings/cmatei/My Documents/GraspitVersions/Graspit-2-1/include/<a class="el" href="glove_interface_8h-source.html">gloveInterface.h</a><li>C:/Documents and Settings/cmatei/My Documents/GraspitVersions/Graspit-2-1/src/gloveInterface.cpp</ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Jul 24 16:39:12 2009 for Graspit by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
